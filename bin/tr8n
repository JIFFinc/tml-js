#!/usr/bin/env node

var program = require('commander');
var config = require('../lib/configuration');

program
  .version('0.0.1')
  .option('-c, --cache', 'Shows cache version')
  .option('-r, --reset', 'Reset cache')
  .parse(process.argv);

config.cache = {
    enabled: true,
    adapter: "redis",
    host: "localhost",
    port: 6379,
    version: 1,
    timeout: 3600
};

config.initCache();

if (program["reset"]) {
  config.getCache().incrementVersion(function(version) {
    console.log("New cache version is: " + version);
  });
} else if (program["cache"]) {
  config.getCache().getVersion(function(version) {
    console.log("Current cache version is: " + version);
  });
}
