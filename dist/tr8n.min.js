/*! tr8n 24-07-2014 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("request");b.exports=c},{}],2:[function(a,b){var c=a("./logger"),d=a("./utils"),e=a("./configuration"),f="/tr8n/api/",g=function(b){this.application=b,this.cache=e.getCache(),this.request=a("./api/request")};g.prototype={getAccessToken:function(a){return this.application.access_token?void a(error,this.application.access_token):void this.api("oauth/request_token",{client_id:this.application.key,client_secret:this.application.secret,grant_type:"client_credentials"},function(b,c){b||(this.application.access_token=c),a(b,c)}.bind(this))},normalizeParams:function(a,b,c,e){return d.isFunction(b)?(e=b,b={}):d.isFunction(c)&&(e=c,c={}),c=c||{},{path:a,params:b,options:c,callback:e}},get:function(a,b,c,d){var e=this.normalizeParams(a,b,c,d);e.options.method="get",this.api(e.path,e.params,e.options,e.callback)},post:function(a,b,c,d){var e=this.normalizeParams(a,b,c,d);e.options.method="post",this.api(e.path,e.params,e.options,e.callback)},api:function(a,b,e,g){var h=new Date;d.extend(b,{key:this.application.key});var i=this.application.getHost()+f+a,j=this,k=function(a,b,d){var e=new Date;c.log("api took "+(e-h)+" mls"),a||200!=b.statusCode?g(a,d):g(a,JSON.parse(d))};"post"==e.method?j.request.post(i,{form:b},k):e.cache_key&&this.cache?this.cache.fetch(e.cache_key,function(a){c.log("api "+e.method+" "+i,b),j.request.get(i,{qs:b},function(b,d,e){var f=new Date;c.log("api took "+(f-h)+" mls"),b||200!=d.statusCode?a(b,e):a(b,e)})},function(a,b){a?g(a,null):g(null,JSON.parse(b))}):(c.log("api "+e.method+" "+i,b),j.request.get(i,{qs:b},k))}},b.exports=g},{"./api/request":1,"./configuration":8,"./logger":16,"./utils":28}],3:[function(a,b){(function(c){var d=a("./utils"),e=a("./configuration"),f=a("./language"),g=a("./source"),h=a("./api_client"),i="https://translationexchange.com",j=function(a){d.extend(this,a),this.languages=[];for(var b in a.languages||[])this.languages.push(new f(d.extend(b,{application:this})));this.default_locale=e.default_locale,this.languages_by_locale={},this.sources_by_key={},this.missing_keys_by_source={},this.translation_keys={}};j.prototype={getHost:function(){return this.host||i},addLanguage:function(a){a.application=this,this.languages_by_locale[a.locale]=a},getLanguage:function(a){return this.languages_by_locale[a||this.default_locale]},addSource:function(a){return this.sources_by_key[a.source]=a,a},getSource:function(a){return this.sources_by_key[a]},isFeatureEnabled:function(a){return this.features&&this.features[a]},getApiClient:function(){return this.api_client||(this.api_client=new h(this)),this.api_client},init:function(a,b){a=a||{};var c=this;c.getApiClient().get("application",{definition:!0},{cache_key:"application"},function(e,f){if(e)throw console.log(err),err;d.extend(this,f),a.locales?c.loadLanguages(a.locales,a,function(){a.sources?c.loadSources(a.sources,a.current_locale,a,function(){b(null)}):b(null)}):b(null)}.bind(this))},loadLanguages:function(b,c,e){d.isFunction(c)&&(e=c,c={});var g=a("async"),h={},i=this;b.forEach(function(a){h[a]=function(b){i.getApiClient().get("language",{locale:a,definition:!0},{cache_key:"language_"+a},function(a,c){return a?void b(a,null):void b(null,new f(d.extend(c,{application:i})))})}}),g.parallel(h,function(a,b){if(a)throw console.log(a),a;Object.keys(b).forEach(function(a){i.addLanguage(b[a])}),e()})},loadDefaultLanguages:function(b,e,g){d.isFunction(e)&&(g=e,e={});var h=a("async"),i=a("fs"),j={},k=this;b.forEach(function(a){j[a]=function(b){var e=c+"/../config/data/"+a+".json";console.log("Loading "+e+" ..."),i.readFile(e,function(a,c){if(a)throw console.log(a),a;b(null,new f(d.extend(c,{application:k})))})}}),h.parallel(j,function(a,b){if(a)throw console.log(a),a;Object.keys(b).forEach(function(a){k.addLanguage(j[a])}),g()})},getSourceKey:function(a,b){return a+"_"+b},loadSources:function(b,c,e,f){d.isFunction(e)&&(f=e,e={});var h=a("async"),i={},j=this;b.forEach(function(a){i[a]=function(b){console.log("loading "+a+" for locale "+c);var f={};e.translator&&e.translator.inline||(f.cache_key=j.getSourceKey(a,c)),j.getApiClient().get("source",{source:a,locale:c,translations:!0},f,function(a,c){return a?void b(a,null):void b(null,new g(d.extend(c,{application:j})))})}}),h.parallel(i,function(a,b){if(a)throw console.log(a),a;Object.keys(b).forEach(function(a){j.addSource(b[a])}),f()})},registerMissingTranslationKey:function(a,b){this.missing_keys_by_source[a]||(this.missing_keys_by_source[a]=[]),this.missing_keys_by_source[a][b.key]=b},submitMissingTranslationKeys:function(b){if(!this.missing_keys_by_source)return void b(!1);var c=d.keys(this.missing_keys_by_source);if(0!==c.length){console.log("Submitting missing translation keys...");for(var e=[],f=["key","label","description","locale","level"],g=0;g<c.length;g++){for(var h=c[g],i=d.keys(this.missing_keys_by_source[h]),j=[],k=0;k<i.length;k++){for(var l=this.missing_keys_by_source[h][i[k]],m={},n=0;n<f.length;n++){var o=f[n];l[o]&&(m[o]=l[o])}j.push(m)}e.push({source:h,keys:j})}var p=this;this.getApiClient().post("source/register_keys",{source_keys:JSON.stringify(e)},function(){var e=a("./cache"),f=new e;p.missing_keys_by_source=null,d.keys(p.languages_by_locale).forEach(function(a){c.forEach(function(b){f.del(p.getSourceKey(b,a),function(){})})}),b()})}},getTranslationKey:function(a){return this.translation_keys[a]},cacheTranslationKey:function(a){var b=this.getTranslationKey(a.key);if(b){for(var c=d.keys(a.translations||{}),e=0;e<c.length;e++){var f=a.translations[c[e]],g=this.getLanguage(c[e]);b.setTranslationsForLanguage(g,f)}return b}return a.setApplication(this),this.translation_keys[a.key]=a,a}},b.exports=j}).call(this,"/..")},{"./api_client":2,"./cache":4,"./configuration":8,"./language":11,"./source":19,"./utils":28,async:29,fs:30}],4:[function(a,b){var c=function(b){if(this.adapter=null,b&&b.enabled)if("redis"==b.adapter){var c=a("./cache_adapters/redis");this.adapter=new c(b)}else if("inline"==b.adapter){var c=a("./cache_adapters/inline");this.adapter=new c(b)}};c.prototype={fetch:function(a,b,c){this.adapter||c(null),this.adapter.fetch(a,b,c)},store:function(a,b,c){this.adapter||c(null),this.adapter.store(a,b,c)},del:function(a,b){this.adapter||b(null),this.adapter.del(a,b)},exists:function(a,b){this.adapter||b(null),this.adapter.exists(a,b)}},b.exports=c},{"./cache_adapters/inline":6,"./cache_adapters/redis":7}],5:[function(a,b){var c=a("../logger"),d="__tr8n_version__",e="tr8n_v",f=function(){};f.prototype={read_only:!0,cached_by_source:!0,name:"",initialize:function(a){this.config=a||{},this.cache=this.create(),this.getVersion()},create:function(){},fetch:function(){},store:function(){},del:function(){},exists:function(){},warn:function(a){c.log(this.name+" - "+a)},info:function(a){c.log(this.name+" - "+a)},getVersion:function(a){this.version||this.fetch(d,1,function(b){this.version=b,a&&a(this.version)}.bind(this)),a&&a(this.version)},getVersionedKey:function(a){return a==d?a:e+this.version+"_"+a}},b.exports=f},{"../logger":16}],6:[function(a,b){var c=a("../utils"),d=a("./base"),e=function(a){this.initialize(a)};e.prototype=c.extend(new d,{name:"inline",read_only:!1,create:function(){return this.config.data},fetch:function(a,b,d){this.config.data[a];d=d||new Function,this.cache.get(this.getVersionedKey(a),function(e,f){f?(this.info("cache hit "+a+": "+f),d(null,f)):(this.info("cache miss "+a),c.isFunction(b)?b(function(b,c){c?this.store(a,c,function(){d(null,c)}):d("no data",null)}.bind(this)):b&&this.store(a,b,function(a){d(null,a)}))}.bind(this))},store:function(a,b,c){return this.info("cache store "+a+" "+b),this.cache.set(this.getVersionedKey(a),b,c)},del:function(a,b){this.info("cache del "+a),this.cache.del(this.getVersionedKey(a),b)},exists:function(a,b){this.cache.get(this.getVersionedKey(a),function(a,c){b&&b(!(a||!c))})}}),b.exports=Redis},{"../utils":28,"./base":5}],7:[function(a,b){var c=a("redis"),d=a("../utils"),e=a("./base"),f=function(a){this.initialize(a)};f.prototype=d.extend(new e,{name:"redis",read_only:!1,create:function(){return c.createClient(this.config.port,this.config.host,this.config.options||{})},fetch:function(a,b,c){c=c||new Function,this.cache.get(this.getVersionedKey(a),function(e,f){f?(this.info("cache hit "+a+": "+f),c(null,f)):(this.info("cache miss "+a),d.isFunction(b)?b(function(b,d){d?this.store(a,d,function(){c(null,d)}):c("no data",null)}.bind(this)):b&&this.store(a,b,function(a){c(null,a)}))}.bind(this))},store:function(a,b,c){return this.info("cache store "+a+" "+b),this.cache.set(this.getVersionedKey(a),b,c)},del:function(a,b){this.info("cache del "+a),this.cache.del(this.getVersionedKey(a),b)},exists:function(a,b){this.cache.get(this.getVersionedKey(a),function(a,c){b&&b(!(a||!c))})}}),b.exports=f},{"../utils":28,"./base":5,redis:55}],8:[function(a,b){var c=a("./cache"),d=function(){this.initDefaultTokens(),this.initTranslatorOptions(),this.initContextRules(),this.enabled=!0,this.default_locale="en-US"};d.prototype={initCache:function(){return this.cache&&this.cache.enabled?(this.cacheAdapter=new c(this.cache),this.cacheAdapter):!1},getCache:function(){return this.cacheAdapter?this.cacheAdapter:!1},initDefaultTokens:function(){this.default_tokens={html:{data:{ndash:"&ndash;",mdash:"&mdash;",iexcl:"&iexcl;",iquest:"&iquest;",quot:"&quot;",ldquo:"&ldquo;",rdquo:"&rdquo;",lsquo:"&lsquo;",rsquo:"&rsquo;",laquo:"&laquo;",raquo:"&raquo;",nbsp:"&nbsp;",lsaquo:"&lsaquo;",rsaquo:"&rsaquo;",br:"<br/>",lbrace:"{",rbrace:"}",trade:"&trade;"},decoration:{strong:"<strong>{$0}</strong>",bold:"<strong>{$0}</strong>",b:"<strong>{$0}</strong>",em:"<em>{$0}</em>",italic:"<i>{$0}</i>",i:"<i>{$0}</i>",link:"<a href='{$href}'>{$0}</a>",br:"<br>{$0}",strike:"<strike>{$0}</strike>",div:"<div id='{$id}' class='{$class}' style='{$style}'>{$0}</div>",span:"<span id='{$id}' class='{$class}' style='{$style}'>{$0}</span>",h1:"<h1>{$0}</h1>",h2:"<h2>{$0}</h2>",h3:"<h3>{$0}</h3>"}},text:{data:{ndash:"–",mdash:"-",iexcl:"¡",iquest:"¿",quot:'"',ldquo:"“",rdquo:"”",lsquo:"‘",rsquo:"’",laquo:"«",raquo:"»",nbsp:" ",lsaquo:"‹",rsaquo:"›",br:"\n",lbrace:"{",rbrace:"}",trade:"™"},decoration:{strong:"{$0}",bold:"{$0}",b:"{$0}",em:"{$0}",italic:"{$0}",i:"{$0}",link:"{$0}{$1}",br:"\n{$0}",strike:"{$0}",div:"{$0}",span:"{$0}",h1:"{$0}",h2:"{$0}",h3:"{$0}"}}}},getDefaultToken:function(a,b,c){return b=b||"data",c=c||"html","undefined"==typeof this.default_tokens[c][b][a]?null:this.default_tokens[c][b][a]},setDefaultToken:function(a,b,c,d){c=c||"data",d=d||"html",this.default_tokens[d]=this.default_tokens[d]||{},this.default_tokens[d][c]=this.default_tokens[d][c]||{},this.default_tokens[d][c][a]=b},initTranslatorOptions:function(){this.translator_options={debug:!0,debug_format_html:"<span style='font-size:20px;color:red;'>{</span> {$0} <span style='font-size:20px;color:red;'>}</span>",debug_format:"{{{{$0}}}}",split_sentences:!1,nodes:{ignored:[],scripts:["style","script"],inline:["a","span","i","b","img","strong","s","em","u","sub","sup"],"short":["i","b"],splitters:["br","hr"]},attributes:{labels:["title","alt"]},name_mapping:{b:"bold",i:"italic",a:"link",img:"picture"},data_tokens:{special:!1,numeric:!1,numeric_name:"num"}}},initContextRules:function(){this.context_rules={number:{variables:{}},gender:{variables:{"@gender":"gender"}},genders:{variables:{"@genders":function(a){var b=[];return a.forEach(function(a){b.push(a.gender)}),b}}},date:{variables:{}},time:{variables:{}}}},getContextRules:function(a){return this.context_rules[a]||{}},isDisabled:function(){return!this.isEnabled()},isEnabled:function(){return this.enabled}},b.exports=new d},{"./cache":4}],9:[function(a,b){var c={decorate:function(a,b,c,d,e){if(e=e||{},e.skip_decorations||d.language==c||!e.current_translator||!e.current_translator.inline||d.locked&&!e.current_translator.manager)return a;var f="tr8n:tr",g=["tr8n_translatable"];if(d.locked){if(!e.current_translator.isFeatureEnabled("show_locked_keys"))return a;g.push("tr8n_locked")}else g.push(b.locale===c.locale?"tr8n_translated":"tr8n_not_translated");var h=[];return h.push("<"+f+" class='"+g.join(" ")+"' data-translation_key='"+d.key+"'>"),h.push(a),h.push("</"+f+">"),h.join("")}};b.exports=c},{}],10:[function(a){window.Tr8nSDK=a("../tr8n"),window.tr=function(a,b,c,d){return d=Tr8nSDK.utils.extend({},d,{current_locale:Tr8nSDK.config.current_locale,current_source:Tr8nSDK.config.current_source,current_translator:Tr8nSDK.config.current_translator}),Tr8nSDK.translate(a,b,c,d)}},{"../tr8n":25}],11:[function(a,b){var c=a("./utils"),d=a("./configuration"),e=a("./language_context"),f=a("./language_case"),g=a("./translation_key"),h=function(a){c.extend(this,a),this.contexts={};for(var b=c.keys(a.contexts||{}),d=0;d<b.length;d++)this.contexts[b[d]]=new e(c.extend(a.contexts[b[d]],{language:this}));for(this.cases={},b=c.keys(a.cases||{}),d=0;d<b.length;d++)this.cases[b[d]]=new f(c.extend(a.cases[b[d]],{language:this}))};h.prototype={getContextByKeyword:function(a){return this.contexts[a]},getContextByTokenName:function(a){for(var b=c.keys(this.contexts||{}),d=0;d<b.length;d++)if(this.contexts[b[d]].isAppliedToToken(a))return this.contexts[b[d]];return null},getLanguageCaseByKeyword:function(a){return this.cases[a]},isDefault:function(){return this.locale==d.default_locale},translate:function(a,b,c,d){var e=new g({label:a,description:b,language:this.application?this.application.getLanguage():null});if(d.current_source&&this.application){var f=this.application.getSource(d.current_source),h=f?f.getTranslationKey(e.key):null;if(h)e=h;else{this.application.registerMissingTranslationKey(d.current_source,e);var i=this.application.getTranslationKey(e.key);i&&(e=i)}}return e.translate(this,c,d)}},b.exports=h},{"./configuration":8,"./language_case":12,"./language_context":14,"./translation_key":27,"./utils":28}],12:[function(a,b){var c=a("./utils"),d=a("./configuration"),e=a("./language_case_rule"),f=function(a){c.extend(this,a),this.rules=[],a.rules=a.rules||[];for(var b=0;b<a.rules.length;b++)this.rules.push(new e(c.extend(a.rules[b],{language_case:this})))};f.prototype={findMatchingRule:function(a,b){for(var c=0;c<this.rules.length;c++){var d=this.rules[c];if(d.evaluate(a,b))return d}return null},apply:function(a,b,d){var e=c.unique(a.match(/<\/?[^>]*>/g)||[]),f=a.replace(/<\/?[^>]*>/g,""),g=[f];"phrase"!=this.application&&(g=c.unique(f.split(/[\s\/]/)||[]));for(var h=0;h<e.length;h++)a=a.replace(e[h],"{$h"+h+"}");for(h=0;h<g.length;h++)a=a.replace(g[h],"{$w"+h+"}");var i=[];for(h=0;h<g.length;h++){var j=g[h],k=this.findMatchingRule(j,b),l=k?k.apply(j):j;i.push(this.decorate(j,l,k,d))}for(h=0;h<g.length;h++)a=a.replace("{$w"+h+"}",i[h]);for(h=0;h<e.length;h++)a=a.replace("{$h"+h+"}",e[h]);return a},getConfig:function(){return d},decorate:function(a,b,c,e){return e&&e.skip_decoration||!this.language||this.language.isDefault()||!d.current_translator||!d.current_translator.isInlineModeEnabled()?b:"<tr8n:tr class='tr8n_language_case' data-original='"+a.replaceAll("'","'")+"'>"+b+"</tr8n:tr>"}},b.exports=f},{"./configuration":8,"./language_case_rule":13,"./utils":28}],13:[function(a,b){var c=a("./utils"),d=a("./rules_engine/parser"),e=a("./rules_engine/evaluator"),f=function(a){c.extend(this,a)};f.prototype={getConditionsExpression:function(){return this.conditions_expression||(this.conditions_expression=new d(this.conditions).parse()),this.conditions_expression},getOperationsExpression:function(){return this.operations_expression||(this.operations_expression=new d(this.operations).parse()),this.operations_expression},getGenderVariables:function(a){if(-1==this.conditions.indexOf("@gender"))return{};if(!a)return{gender:"unknown"};var b=this.language_case.language.getContextByKeyword("gender");return b?b.getVars(a):{gender:"unknown"}},evaluate:function(a,b){if(!this.conditions)return!1;var d=new e;return d.setVars(c.extend({"@value":a},this.getGenderVariables(b))),d.evaluate(this.getConditionsExpression())},apply:function(a){if(!this.operations)return a;var b=new e;return b.setVars({"@value":a}),b.evaluate(this.getOperationsExpression())}},b.exports=f},{"./rules_engine/evaluator":17,"./rules_engine/parser":18,"./utils":28}],14:[function(a,b){var c=a("./utils"),d=a("./configuration"),e=a("./language_context_rule"),f=function(a){c.extend(this,a),this.rules={};for(var b=c.keys(a.rules||{}),d=0;d<b.length;d++)this.rules[b[d]]=new e(c.extend(a.rules[b[d]],{language_context:this}))};f.prototype={isAppliedToToken:function(a){var b=new RegExp(this.token_expression.substring(1,this.token_expression.length-2));return null!==a.match(b)},getFallbackRule:function(){if(!this.fallback_rule)for(var a=c.keys(this.rules),b=0;b<a.length;b++){var d=a[b];this.rules[d].isFallback()&&(this.fallback_rule=this.rules[d])}return this.fallback_rule},getConfig:function(){return d.getContextRules(this.keyword)},getVars:function(a){for(var b={},c=this.getConfig(),d=0;d<this.variables.length;d++){var e=this.variables[d];if(c.variables&&c.variables[e]){var f=c.variables[e];"string"==typeof f?(a.object&&(a=a.object),b[e]=a[f]):b[e]="function"==typeof f?f(a):a}else b[e]=a}return b},findMatchingRule:function(a){for(var b=this.getVars(a),d=c.keys(this.rules),e=0;e<d.length;e++){var f=this.rules[d[e]];if(!f.isFallback()&&f.evaluate(b))return f}return this.getFallbackRule()}},b.exports=f},{"./configuration":8,"./language_context_rule":15,"./utils":28}],15:[function(a,b){var c=a("./utils"),d=a("./rules_engine/parser"),e=a("./rules_engine/evaluator"),f=function(a){c.extend(this,a)};f.prototype={isFallback:function(){return"other"==this.keyword},getConditionsExpression:function(){return this.conditions_expression||(this.conditions_expression=new d(this.conditions).parse()),this.conditions_expression},evaluate:function(a){if(this.isFallback())return!0;var b=new e;return b.setVars(a||{}),b.evaluate(this.getConditionsExpression())}},b.exports=f},{"./rules_engine/evaluator":17,"./rules_engine/parser":18,"./utils":28}],16:[function(a,b){var c=(a("./utils"),{log:function(a,b){var c="Tr8n: "+a;b&&(c=c+" "+JSON.stringify(b)),console.log(c)}});b.exports=c},{"./utils":28}],17:[function(a,b){var c=function(a){return this.vars={},this.ctx=a||{label:function(a,b){return this.vars[a]=this.ctx[a]=b,b},quote:function(a){return a},car:function(a){return a[1]},cdr:function(a){return a.shift(),a},cons:function(a,b){return b.unshift(a),b},eq:function(a,b){return a==b},atom:function(a){return!(typeof a in{object:1,array:1,"function":1})},cond:function(a,b,c){return this.evaluate(this.evaluate(a)?b:c)},set:function(a,b){return this.vars[a]=this.ctx[a]=b,b},"=":function(a,b){return a==b},"!=":function(a,b){return a!=b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"+":function(a,b){return a+b},"-":function(a,b){return a-b},"*":function(a,b){return a*b},"%":function(a,b){return a%b},mod:function(a,b){return a%b},"/":function(a,b){return 1*a/b},"!":function(a){return!a},not:function(a){return!a},"&&":function(){return Array.prototype.slice.call(arguments).every(this.evaluate.bind(this))},and:function(){return Array.prototype.slice.call(arguments).every(this.evaluate.bind(this))},"||":function(){return!!Array.prototype.slice.call(arguments).filter(this.evaluate.bind(this)).length},or:function(){return!!Array.prototype.slice.call(arguments).filter(this.evaluate.bind(this)).length},"if":function(a,b,c){return this.evaluate(this.evaluate(a)?b:c)},let:function(a,b){return this.vars[a]=b},"true":function(){return!0},"false":function(){return!1},date:function(a){return new Date(a)},today:function(){return new Date},time:function(a){return new Date(a)},now:function(){return Date.now()},append:function(a,b){return String(b)+String(a)},prepend:function(a,b){return String(a)+String(b)},match:function(a,b){return a=this._stringToRegexp(a),!!b.match(a)},"in":function(a,b){var c,d=this._range;return a=a.replace(/\s/g,"").replace(/(\w+)\.\.(\w+)/g,function(a,b,e){return c=d(b,e),c.push(e),c.join()}),-1!=a.split(",").indexOf(String(b))},within:function(a,b){var c=a.split("..").map(function(a){return parseInt(a)});return c[0]<=b&&b<=c[1]},replace:function(a,b,c){return a=this._stringToRegexp(a),c.replace(a,b)},count:function(a){return("string"==typeof a?this.vars[a]:a).length},all:function(a,b){return a="string"==typeof a?this.vars[a]:a,a instanceof Array?a.every(function(a){return a==b}):!1},any:function(a,b){return a="string"==typeof a?this.vars[a]:a,a instanceof Array?!!a.filter(function(a){return a==b}):!1}},this};c.prototype={_range:function(a,b){var c=[],d=!String(a).match(/^\d+$/);for(a=d?a.charCodeAt(0):parseInt(a),b=d?b.charCodeAt(0):parseInt(b);b>=a;)c.push(d?String.fromCharCode(a):String(a)),a+=1;return c},_stringToRegexp:function(a){var b=new RegExp("^/","g");return a.match(b)?(a=a.replace(b,""),a.match(/\/i$/)?(a=a.replace(/\/i$/g,""),new RegExp(a,"ig")):(a=a.replace(/\/$/,""),new RegExp(a,"g"))):new RegExp(a,"g")},setVars:function(a){this.vars=a},getVars:function(){return this.vars},apply:function(a,b){return"function"==typeof this.ctx[a]?this.ctx[a].apply(this,b):this.ctx[a]},evaluate:function(a){if(this.ctx.atom.call(this,a))return"string"==typeof a&&this.vars[a]?this.vars[a]:a in this.ctx?this.ctx[a]:a;var b=a[0],c=a.slice(1);return-1==["quote","car","cdr","cond","if","&&","||","and","or","true","false","let","count","all","any"].indexOf(b)&&(c=c.map(this.evaluate.bind(this))),this.apply(b,c)}},b.exports=c},{}],18:[function(a,b){var c=function(a){this.tokenize(a)};c.prototype={tokenize:function(a){this.tokens=a.match(/[()]|\w+|@\w+|[\+\-\!\|\=>&<\*\/%]+|\".*?\"|'.*?'/g)},parse:function(){return(token=this.tokens.shift())?"("==token?this.parseList():token.match(/^['"].*/)?token.slice(1,-1):token.match(/\d+/)?parseInt(token):String(token):void 0},parseList:function(){for(var a=[];this.tokens.length>0&&")"!=this.tokens[0];)a.push(this.parse());return this.tokens.shift(),a}},b.exports=c},{}],19:[function(a,b){var c=a("./utils"),d=(a("./configuration"),a("./translation_key")),e=function(a){c.extend(this,a),this.translation_keys={},keys=c.keys(a.translation_keys||{});for(var b=0;b<keys.length;b++){var e=a.translation_keys[keys[b]];e=new d(c.extend(e,{application:this.application})),this.translation_keys[e.key]=e}};e.prototype={getTranslationKey:function(a){return this.translation_keys[a]}},b.exports=e},{"./configuration":8,"./translation_key":27,"./utils":28}],20:[function(a,b){var c=(a("../configuration"),a("../tokens/data")),d=a("../tokens/method"),e=a("../tokens/piped"),f=function(a){this.label=a,this.tokenize()};f.prototype={tokenize:function(){this.tokens=[];for(var a=this.getSupportedTokens(),b=""+this.label,c=0;c<a.length;c++){for(var d=a[c],e=b.match(d[0])||[],f=0;f<e.length;f++)this.tokens.push(new d[1](e[f],this.label));b=b.replace(a[c][0],"")}},getSupportedTokens:function(){return[[/(\{[^_:][\w]*(:[\w]+)*(::[\w]+)*\})/g,c],[/(\{[^_:.][\w]*(\.[\w]+)(:[\w]+)*(::[\w]+)*\})/g,d],[/(\{[^_:|][\w]*(:[\w]+)*(::[\w]+)*\s*\|\|?[^{^}]+\})/g,e]]},isTokenAllowed:function(a,b){return b.allowed_tokens?-1!=b.allowed_tokens.indexOf(a):!0},substitute:function(a,b,c){c=c||{};for(var d=this.label,e=0;e<this.tokens.length;e++){var f=this.tokens[e];this.isTokenAllowed(f.name,c)&&(d=f.substitute(d,b,a,c))}return d}},b.exports=f},{"../configuration":8,"../tokens/data":22,"../tokens/method":23,"../tokens/piped":24}],21:[function(a,b){var c=a("../utils"),d=a("../configuration"),e="tr8n",f="\\[[\\w]*:",g="\\]",h="\\[[\\w]*\\]",i="\\[\\/[\\w]*\\]",j="[^\\[\\]]+",k="short",l="long",m="{$0}",n=function(a){this.label="["+e+"]"+a+"[/"+e+"]",this.fragments=[],this.tokens=[],this.tokenize()};n.prototype={tokenize:function(){var a=new RegExp([f,g,h,i,j].join("|"),"g");return this.fragments=this.label.match(a),this.fragments},peek:function(){return 0==this.fragments.length?null:this.fragments[0]},getNextFragment:function(){return 0==this.fragments.length?null:this.fragments.shift()},parse:function(){var a=this.getNextFragment();return a.match(new RegExp(f))?this.parseTree(a.replace(/[\[:]/g,""),k):a.match(new RegExp(h))?this.parseTree(a.replace(/[\[\]]/g,""),l):a},parseTree:function(a,b){var c=[a];if(-1==this.tokens.indexOf(a)&&a!=e&&this.tokens.push(a),b==k)for(var d=!0;null!=this.peek()&&!this.peek().match(new RegExp(g));){var f=this.parse();d&&"string"==typeof f&&(f=f.replace(/^\s+/,""),d=!1),c.push(f)}else if(b==l)for(;null!=this.peek()&&!this.peek().match(new RegExp(i));)c.push(this.parse());return this.getNextFragment(),c},isTokenAllowed:function(a){return!this.options.allowed_tokens||-1!=this.options.allowed_tokens.indexOf(a)},getDefaultDecoration:function(a,b){var e=d.getDefaultToken(a,"decoration");if(null==e)return b;var f=this.context[a];if(e=e.replace(m,b),f instanceof Object)for(var g=c.keys(f),h=0;h<g.length;h++)e=e.replace("{$"+g[h]+"}",f[g[h]]);return e},apply:function(a,b){if(a==e)return b;if(!this.isTokenAllowed(a))return b;var c=this.context[a];return null!=c?"string"==typeof c?c.replace(m,b):"function"==typeof c?c(b):"object"==typeof c?this.getDefaultDecoration(a,b):b:this.getDefaultDecoration(a,b)},evaluate:function(a){if(!(a instanceof Array))return a;var b=a[0];a.shift();for(var c=this,d=[],e=0;e<a.length;e++)d.push(c.evaluate(a[e]));return this.apply(b,d.join(""))},substitute:function(a,b){return this.context=a||{},this.options=b||{},this.evaluate(this.parse())}},b.exports=n},{"../configuration":8,"../utils":28}],22:[function(a,b){var c=a("../utils"),d=(a("../logger"),a("../configuration")),e=function(a,b){a&&(this.full_name=a,this.label=b,this.parseElements())};e.prototype={parseElements:function(){var a=this.full_name.substring(1,this.full_name.length-1),b=a.split("::")[0].trim();this.short_name=a.split(":")[0].trim(),this.case_keys=[];for(var c=a.match(/(::\s*\w+)/g)||[],d=0;d<c.length;d++)this.case_keys.push(c[d].replace(/[:]/g,"").trim());for(this.context_keys=[],c=b.match(/(:\s*\w+)/g)||[],d=0;d<c.length;d++)this.context_keys.push(c[d].replace(/[:]/g,"").trim())},getContextForLanguage:function(a){return this.context_keys.length>0?a.getContextByKeyword(this.context_keys[0]):a.getContextByTokenName(this.short_name)},getTokenObject:function(a,b){if(!a)return null;b=b||this.short_name;var d=a[b];return c.isArray(d)?d[0]:d.object||d},error:function(a){return console.log(this.full_name+' in "'+this.label+'" : '+a),this.full_name},getTokenValueFromArrayParam:function(a,b,d){if(d=d||{},0==a.length)return this.error("Invalid number of params of an array");var e=a[0],f=a.length>1?a[1]:null;return c.isArray(e)?this.getTokenValueFromArray(a,b,d):f?this.sanitize(f.toString(),e,b,c.extend(d,{safe:!0})):this.sanitize(e.toString(),e,b,c.extend(d,{safe:!1}))},getTokenValueFromHashParam:function(a,b,d){d=d||{};var e=a.value,f=a.object;if(e)return this.sanitize(e,f||a,b,c.extend(d,{safe:!0}));if(!f)return this.sanitize(a.toString(),f,b,c.extend(d,{safe:!1}));var g=a.attribute;return g?this.sanitize(f[g],f,b,c.extend(d,{safe:!1})):this.error("Missing value for hash token")},getTokenValueFromArray:function(a,b,d){var e={description:"List joiner",limit:4,separator:", ",joiner:"and",less:"{laquo} less",expandable:!1,collapsable:!0};d=d||{};var f=a[0],g=a.length>1?a[1]:null;a.length>2&&(e=c.extend(e,a[2])),d.skip_decorations&&(e.expandable=!1);for(var h=[],i=0;i<f.length;i++){var j=f[i];if(null==g)h.push(this.sanitize(""+j,j,b,c.extend(d,{safe:!1})));else if("string"==typeof g)if(g.match(/^@/)){var k=g.replace(/^@/,"");h.push(this.sanitize(j[k]||j[k](),j,b,c.extend(d,{safe:!1})))}else h.push(g.replace("{$0}",this.sanitize(""+j,j,b,c.extend(d,{safe:!1}))));else if(c.isObject(g)){var l=g.attribute,m=g.value;if(!l)return this.error("No attribute is provided for the hash object in the array");if(!j[l])return this.error("Hash object in the array does not contain such attribute");l=this.sanitize(j[l],j,b,c.extend(d,{safe:!1})),h.push(m?m.replace("{$0}",l):l)}else"function"==typeof g&&h.push(this.sanitize(g(j),j,b,c.extend(d,{safe:!0})))}if(1==h.length)return h[0];if(!e.joiner||""==e.joiner)return h.join(e.separator);var n=b.translate(e.joiner,e.description,{},d);if(h.length<=e.limit){var o=h.pop();return h.join(e.separator)+" "+n+" "+o}var p=h.slice(0,e.limit),q=h.slice(e.limit),r=p.join(e.separator),s=b.translate("{count||other}",e.description,{count:q.length},d);if(!e.expandable)return r=r+" "+n+" ",c.isFunction(e)?r+e.remainder(q):r+s;var t=e.key?e.key:c.generateKey(this.label,h.join(","));r=r+'<span id="tr8n_other_link_'+t+'"> '+n+" ",r+="<a href=\"#\" class=\"tr8n_other_list_link\" onClick=\"document.getElementById('tr8n_other_link_key').style.display='none'; document.getElementById('tr8n_other_elements_key').style.display='inline'; return false;\">",r+=e.remainder&&"function"==typeof e.remainder?e.remainder(q):s,r+="</a></span>",r=r+'<span id="tr8n_other_elements_'+t+'" style="display:none">'+e.separator;var u=q.pop();return r+=q.join(e.separator),r=r+" "+n+" "+u,e.collapsable&&(r+=" <a href=\"#\" class=\"tr8n_other_less_link\" style=\"font-size:smaller;white-space:nowrap\" onClick=\"document.getElementById('tr8n_other_link_key').style.display='inline'; document.getElementById('tr8n_other_elements_key').style.display='none'; return false;\">",r+=b.translate(e.less,e.description,{},d),r+="</a>"),r+="</span>"},getTokenValue:function(a,b,e){a=a||{},e=e||{};var f=a[this.short_name]||d.getDefaultToken(this.short_name);return f?"string"==typeof f?this.sanitize(f.toString(),f,b,c.extend(e,{safe:!0})):c.isArray(f)?this.getTokenValueFromArrayParam(f,b,e):c.isObject(f)?this.getTokenValueFromHashParam(f,b,e):this.sanitize(f.toString(),f,b,c.extend(e,{safe:!1})):this.error("Missing token value")},applyCase:function(a,b,c,d,e){var f=d.getLanguageCaseByKeyword(a);return f?f.apply(b,c,e):b},sanitize:function(a,b,d,e){if(e=e||{},a=a.toString(),e.safe||(a=c.escapeHTML(a)),this.case_keys.length>0)for(var f=0;f<this.case_keys.length;f++)a=this.applyCase(this.case_keys[f],a,b,d,e);return a},substitute:function(a,b,c,d){return a.replace(this.full_name,this.getTokenValue(b,c,d))}},b.exports=e},{"../configuration":8,"../logger":16,"../utils":28}],23:[function(a,b){var c=a("../utils"),d=a("./data"),e=function(a,b){a&&(this.full_name=a,this.label=b,this.parseElements(),this.initObject())};e.prototype=new d,e.prototype.constructor=e,e.prototype.initObject=function(){var a=this.short_name.split(".");this.short_name=a[0],this.object_method=a[1]},e.prototype.getTokenValue=function(a){a=a||{};var b=a[this.short_name];if(!b)return this.error("Missing token value");var c=b[this.object_method]||b[this.object_method]();return c||c.toString()},e.prototype.substitute=function(a,b,d,e){return a.replace(this.full_name,this.sanitize(this.getTokenValue(b),this.getTokenObject(b),d,c.extend(e,{safe:!1})))},b.exports=e},{"../utils":28,"./data":22}],24:[function(a,b){var c=a("../utils"),d=a("./data"),e=function(a,b){a&&(this.full_name=a,this.label=b,this.parseElements())};e.prototype=new d,e.prototype.constructor=e,e.prototype.parseElements=function(){var a=this.full_name.substring(1,this.full_name.length-1),b=a.split("|"),c=b[0].trim();this.short_name=c.split(":")[0].trim(),this.case_keys=[];for(var d=c.match(/(::\s*\w+)/g)||[],e=0;e<d.length;e++)this.case_keys.push(d[e].replace(/[:]/g,"").trim());this.context_keys=[];var f=c.split("::")[0].trim();for(d=f.match(/(:\s*\w+)/g)||[],e=0;e<d.length;e++)this.context_keys.push(d[e].replace(/[:]/g,"").trim());if(this.separator=-1!=this.full_name.indexOf("||")?"||":"|",this.parameters=[],b=a.split(this.separator),b.length>1)for(b=b[1].split(","),e=0;e<b.length;e++)this.parameters.push(b[e].trim())},e.prototype.isValueDisplayedInTranslation=function(){return"||"==this.separator
},e.prototype.generateValueMapForContext=function(a){var b={};if(-1!=this.parameters[0].indexOf(":")){for(var d=0;d<this.parameters.length;d++){var e=this.parameters[d].split(":");b[e[0].trim()]=e[1].trim()}return b}var f=a.token_mapping;if(!f)return this.error("The token context "+a.keyword+"does not support transformation for unnamed params"),null;if("string"==typeof f)return this.error("The token mapping "+f+" does not support the parameters."),null;if(c.isArray(f)){if(this.parameters.length>f.length)return this.error("The token mapping "+f+" does not support "+this.parameters.length+" parameters"),null;if(f=f[this.parameters.length-1],"string"==typeof f)return this.error("The token mapping "+f+" does not support "+this.parameters.length+" parameters"),null}for(var g=c.keys(f),d=0;d<g.length;d++){var h=g[d],i=f[h];b[h]=i;for(var j=i.match(/{\$\d(::[\w]+)*\}/g)||[],k=0;k<j.length;k++){var l=j[k],m=l.replace(/[\{\}]/g,""),n=m.split("::"),o=parseInt(n[0].replace(/[$]/,""));if(this.parameters.length<o)return this.error("The index inside "+f+" is out of bound: "+this.full_name),null;var p=this.parameters[o];n.shift();for(var q=0;q<n.length;q++){var r=a.language.getLanguageCaseByKeyword(n[q]);r&&(p=r.apply(p))}b[h]=b[h].replace(j[k],p)}}return b},e.prototype.substitute=function(a,b,c,d){if(!b[this.short_name])return this.error("Missing value"),a;var e=this.getTokenObject(b);if(0==this.parameters.length)return this.error("Piped params may not be empty"),a;var f=this.getContextForLanguage(c),g=this.generateValueMapForContext(f);if(!g)return a;var h=f.findMatchingRule(e);if(null==h)return a;var i=g[h.keyword];if(!i){var j=f.getFallbackRule();if(!j||!g[j.keyword])return this.error("No matching context rule found and no fallback provided"),a;i=g[j.keyword]}var k=[];return this.isValueDisplayedInTranslation()?(k.push(this.getTokenValue(b,c,d)),k.push(" ")):i=i.replace("#"+this.short_name+"#",this.getTokenValue(b,c,d)),k.push(i),a.replace(this.full_name,k.join(""))},b.exports=e},{"../utils":28,"./data":22}],25:[function(a,b){var c=a("./utils"),d=a("./configuration"),e=a("./application"),f={utils:c,config:d,init:function(a,b,f,g){c.extend(d,f),this.application=new e({key:a,secret:b,host:f.host}),d.initCache(),g&&g()},translate:function(a,b,c,e){return this.application.getLanguage(d.current_locale).translate(a,b,c,e)},configure:function(a){a(d)},cache:function(a){var b=d.cache.data||{};b.languages=b.languages||{},b.sources=b.sources||{},d.cache.data=b,a(d.cache.data)}};b.exports=f},{"./application":3,"./configuration":8,"./utils":28}],26:[function(a,b){var c=a("./utils"),d=a("./tokens/data"),e=function(a){c.extend(this,a)};e.prototype={hasContextRules:function(){return this.context&&c.keys(this.context).length>0},isValidTranslation:function(a){if(!this.hasContextRules())return!0;for(var b=c.keys(this.context),e=0;e<b.length;e++){var f=b[e],g=this.context[f],h=d.prototype.getTokenObject(a,f);if(!h)return!1;for(var i=c.keys(g),j=0;j<i.length;j++){var k=i[j],l=g[i[j]];if("other"!=l){var m=this.language.getContextByKeyword(k);if(!m)return!1;var n=m.findMatchingRule(h);if(!n||n.keyword!=l)return!1}}}return!0}},b.exports=e},{"./tokens/data":22,"./utils":28}],27:[function(a,b){var c=a("./utils"),d=a("./configuration"),e=a("./translation"),f=a("./decorators/html"),g=a("./tokenizers/data"),h=a("./tokenizers/decoration"),i=function(a){c.extend(this,a),this.key=this.key||c.generateKey(this.label,this.description),!this.locale&&this.application&&(this.locale=this.application.default_locale),!this.language&&this.application&&(this.language=this.application.getLanguage(this.locale)),this.translations={},this.addTranslations(a.translations||{})};i.prototype={addTranslations:function(a){for(var b=c.keys(a),d=0;d<b.length;d++)for(var f=b[d],g=a[f],h=0;h<g.length;h++){var i=g[h];this.addTranslation(new e(c.extend(i,{language:this.application.getLanguage(i.locale),translation_key:this})))}},addTranslation:function(a){var b=this.translations[a.locale];b||(b=[]),b.push(a),this.translations[a.locale]=b},resetTranslations:function(){this.translations={}},getTranslationsForLanguage:function(a){return this.translations?this.translations[a.locale]||[]:[]},findFirstValidTranslation:function(a,b){for(var c=this.getTranslationsForLanguage(a),d=0;d<c.length;d++)if(c[d].isValidTranslation(b))return c[d];return null},translate:function(a,b,c){if(c=c||{},d.isDisabled())return this.substituteTokens(this.label,b,a,c);var e=this.findFirstValidTranslation(a,b),g=f;return e?g.decorate(this.substituteTokens(e.label,b,e.language,c),e.language,a,this,c):g.decorate(this.substituteTokens(this.label,b,this.language||a,c),this.language||a,a,this,c)},getDataTokens:function(){if(!this.data_tokens){var a=new g(this.label);this.data_tokens=a.tokens}return this.data_tokens},getDataTokenNames:function(){if(!this.data_token_names){this.data_token_names=[];for(var a in this.getDataTokens())this.data_token_names.push(a.full_name)}return this.data_token_names},getDecorationTokenNames:function(){if(!this.decoration_tokens){var a=new h(this.label);a.parse(),this.decoration_tokens=a.tokens}return this.decoration_tokens},substituteTokens:function(a,b,d,e){if(-1!=a.indexOf("{")){var f=new g(a);a=f.substitute(d,b,c.extend(e,{allowed_tokens:this.getDataTokenNames()}))}return-1!=a.indexOf("[")&&(f=new h(a),a=f.substitute(b,c.extend(e,{allowed_tokens:this.getDecorationTokenNames()}))),a}},b.exports=i},{"./configuration":8,"./decorators/html":9,"./tokenizers/data":20,"./tokenizers/decoration":21,"./translation":26,"./utils":28}],28:[function(a,b){(function(c){var d=a("crypto");b.exports={hashValue:function(a,b,c){c=c||null;for(var d=b.split("."),e=0;e<d.length;e++){var f=d[e];if("undefined"==typeof a[f])return c;a=a[f]}return a},stripTags:function(a,b){b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,d=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return a.replace(d,"").replace(c,function(a,c){return b.indexOf("<"+c.toLowerCase()+">")>-1?a:""})},splitSentences:function(a){var b=/[^.!?\s][^.!?]*(?:[.!?](?![\'"]?\s|$)[^.!?]*)*[.!?]?[\'"]?(?=\s|$)/g;return this.stripTags(a).match(b)},unique:function(a){return a.reverse().filter(function(a,b,c){return-1===c.indexOf(a,b+1)}).reverse()},clone:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=clone(a[c]);return b},keys:function(a){return Object.keys(a)},generateKey:function(a,b){return d.createHash("md5").update(a+";;;"+b).digest("hex")},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return"object"==typeof a},isFunction:function(a){return"function"==typeof a},escapeHTML:function(a){return a.replace(/[&<>]/g,function(a){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[a]||a})},decodeAndVerifyParams:function(a,b){if(!a)return null;a=decodeURIComponent(a),a=decodeURIComponent(a),a=new c(a,"base64").toString("utf-8");var e=a.split("."),f=e[0].trim(),g=e[1],h=d.createHmac("sha256",b).update(g).digest();if(h=new c(h).toString("base64").trim(),f!=h)return null;var i=new c(g,"base64").toString("utf-8");return JSON.parse(i)},normalizeSource:function(a){return a},extend:function(a){for(var b=function(a,b){for(var c in b)hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},c=1;c<arguments.length;c++)a=b(a,arguments[c]);return a},addCSS:function(a,b,c){var d=null;return c?(d=a.createElement("style"),d.type="text/css",d.styleSheet?d.styleSheet.cssText=b:d.appendChild(document.createTextNode(b))):(d=a.createElement("link"),d.setAttribute("type","text/css"),d.setAttribute("rel","stylesheet"),d.setAttribute("media","screen"),d.setAttribute("href",b)),a.getElementsByTagName("head")[0].appendChild(d),d},addJS:function(a,b,c,d){var e=a.createElement("script");return e.setAttribute("id",b),e.setAttribute("type","application/javascript"),e.setAttribute("src",c),e.setAttribute("charset","UTF-8"),d&&(e.onload=d),a.getElementsByTagName("head")[0].appendChild(e),e}}}).call(this,a("buffer").Buffer)},{buffer:31,crypto:37}],29:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=Object.prototype.toString,h=Array.isArray||function(a){return"[object Array]"===g.call(a)},i=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},j=function(a,b){if(a.map)return a.map(b);var c=[];return i(a,function(a,d,e){c.push(b(a,d,e))}),c},k=function(a,b,c){return a.reduce?a.reduce(b,c):(i(a,function(a,d,e){c=b(c,a,d,e)}),c)},l=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){function e(b){b?(d(b),d=function(){}):(f+=1,f>=a.length&&d())}if(d=d||function(){},!a.length)return d();var f=0;i(a,function(a){b(a,c(e))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=m(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var m=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},o=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[m(a)].concat(c))}},p=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},q=function(a,b,c,d){if(b=j(b,function(a,b){return{index:b,value:a}}),d){var e=[];a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})}else a(b,function(a,b){c(a.value,function(a){b(a)})})};f.map=n(q),f.mapSeries=p(q),f.mapLimit=function(a,b,c,d){return r(b)(a,c,d)};var r=function(a){return o(a,q)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=j(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var s=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=n(s),f.filterSeries=p(s),f.select=f.filter,f.selectSeries=f.filterSeries;var t=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=n(t),f.rejectSeries=p(t);var u=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=n(u),f.detectSeries=p(u),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,j(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=l(a),d=c.length;if(!d)return b();var e={},g=[],j=function(a){g.unshift(a)},m=function(a){for(var b=0;b<g.length;b+=1)if(g[b]===a)return void g.splice(b,1)},n=function(){d--,i(g.slice(0),function(a){a()})};j(function(){if(!d){var a=b;b=function(){},a(null,e)}}),i(c,function(c){var d=h(a[c])?a[c]:[a[c]],g=function(a){var d=Array.prototype.slice.call(arguments,1);if(d.length<=1&&(d=d[0]),a){var g={};i(l(e),function(a){g[a]=e[a]}),g[c]=d,b(a,g),b=function(){}}else e[c]=d,f.setImmediate(n)},o=d.slice(0,Math.abs(d.length-1))||[],p=function(){return k(o,function(a,b){return a&&e.hasOwnProperty(b)},!0)&&!e.hasOwnProperty(c)};if(p())d[d.length-1](g,e);else{var q=function(){p()&&(m(q),d[d.length-1](g,e))};j(q)}})},f.retry=function(a,b,c){var d=5,e=[];"function"==typeof a&&(c=b,b=a,a=d),a=parseInt(a,10)||d;var g=function(d,g){for(var h=function(a,b){return function(c){a(function(a,d){c(!a||b,{err:a,result:d})},g)}};a;)e.push(h(b,!(a-=1)));f.series(e,function(a,b){b=b[b.length-1],(d||c)(b.err,b.result)})};return c?g():g},f.waterfall=function(a,b){if(b=b||function(){},!h(a)){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var v=function(a,b,c){if(c=c||function(){},h(b))a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(l(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){v({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){v({map:r(b),each:m(b)},a,c)},f.series=function(a,b){if(b=b||function(){},h(a))f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(l(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var w=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=n(w),f.concatSeries=p(w),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?f.doWhilst(a,b,c):c()})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?c():f.doUntil(a,b,c)})},f.queue=function(a,b){function d(a,b,c,d){return a.started||(a.started=!0),h(b)||(b=[b]),0==b.length?f.setImmediate(function(){a.drain&&a.drain()}):void i(b,function(b){var e={data:b,callback:"function"==typeof d?d:null};c?a.tasks.unshift(e):a.tasks.push(e),a.saturated&&a.tasks.length===a.concurrency&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,g={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(a,b){d(g,a,!1,b)},kill:function(){g.drain=null,g.tasks=[]},unshift:function(a,b){d(g,a,!0,b)},process:function(){if(!g.paused&&e<g.concurrency&&g.tasks.length){var b=g.tasks.shift();g.empty&&0===g.tasks.length&&g.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),g.drain&&g.tasks.length+e===0&&g.drain(),g.process()},f=c(d);a(b.data,f)}},length:function(){return g.tasks.length},running:function(){return e},idle:function(){return g.tasks.length+e===0},pause:function(){g.paused!==!0&&(g.paused=!0,g.process())},resume:function(){g.paused!==!1&&(g.paused=!1,g.process())}};return g},f.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function d(a,b,c){for(var d=-1,e=a.length-1;e>d;){var f=d+(e-d+1>>>1);c(b,a[f])>=0?d=f:e=f-1}return d}function e(a,b,e,g){return a.started||(a.started=!0),h(b)||(b=[b]),0==b.length?f.setImmediate(function(){a.drain&&a.drain()}):void i(b,function(b){var h={data:b,priority:e,callback:"function"==typeof g?g:null};a.tasks.splice(d(a.tasks,h,c)+1,0,h),a.saturated&&a.tasks.length===a.concurrency&&a.saturated(),f.setImmediate(a.process)})}var g=f.queue(a,b);return g.push=function(a,b,c){e(g,a,b,c)},delete g.unshift,g},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,drained:!0,push:function(a,c){h(a)||(a=[a]),i(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.drained=!1,e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function g(){if(!c){if(0===d.length)return e.drain&&!e.drained&&e.drain(),void(e.drained=!0);var f="number"==typeof b?d.splice(0,b):d.splice(0,d.length),h=j(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(h,function(){c=!1;var a=arguments;i(f,function(b){b.callback&&b.callback.apply(null,a)}),g()})}},length:function(){return d.length},running:function(){return c}};return e};var x=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&i(c,function(b){console[a](b)}))}]))}};f.log=x("log"),f.dir=x("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),g=e.pop(),h=b.apply(null,e);h in c?f.nextTick(function(){g.apply(null,c[h])}):h in d?d[h].push(g):(d[h]=[g],a.apply(null,e.concat([function(){c[h]=arguments;var a=d[h];delete d[h];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.seq=function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},f.compose=function(){return f.seq.apply(null,Array.prototype.reverse.call(arguments))};var y=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=n(y),f.applyEachSeries=p(y),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof b&&b.exports?b.exports=f:"undefined"!=typeof define&&define.amd?define([],function(){return f}):d.async=f}()}).call(this,a("FWaASH"))},{FWaASH:50}],30:[function(){},{}],31:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e,f=typeof a;if("number"===f)e=a>0?a>>>0:0;else if("string"===f)"base64"===b&&(a=C(a)),e=d.byteLength(a,b);else{if("object"!==f||null===a)throw new Error("First argument needs to be a number, array or string.");"Buffer"===a.type&&Array.isArray(a.data)&&(a=a.data),e=+a.length>0?Math.floor(+a.length):0}var g;d._useTypedArrays?g=d._augment(new Uint8Array(e)):(g=this,g.length=e,g._isBuffer=!0);var h;if(d._useTypedArrays&&"number"==typeof a.byteLength)g._set(a);else if(F(a))if(d.isBuffer(a))for(h=0;e>h;h++)g[h]=a.readUInt8(h);else for(h=0;e>h;h++)g[h]=(a[h]%256+256)%256;else if("string"===f)g.write(a,0,b);else if("number"===f&&!d._useTypedArrays&&!c)for(h=0;e>h;h++)g[h]=0;return g}function e(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;Q(f%2===0,"Invalid hex string"),d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);Q(!isNaN(h),"Invalid hex string"),a[c+g]=h}return g}function f(a,b,c,d){var e=L(H(b),a,c,d);return e}function g(a,b,c,d){var e=L(I(b),a,c,d);return e}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,d){var e=L(K(b),a,c,d);return e}function j(a,b,c,d){var e=L(J(b),a,c,d);return e}function k(a,b,c){return R.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=M(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+M(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=G(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(b+3<a.length,"Trying to read beyond buffer length")),S.read(a,b,c,23,4)}function v(a,b,c,d){return d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(b+7<a.length,"Trying to read beyond buffer length")),S.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+1<a.length,"trying to write beyond buffer length"),N(b,65535));var f=a.length;if(!(c>=f)){for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g);return c+2}}function x(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+3<a.length,"trying to write beyond buffer length"),N(b,4294967295));var f=a.length;if(!(c>=f)){for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255;return c+4}}function y(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+1<a.length,"Trying to write beyond buffer length"),O(b,32767,-32768));var f=a.length;if(!(c>=f))return b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e),c+2}function z(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+3<a.length,"Trying to write beyond buffer length"),O(b,2147483647,-2147483648));var f=a.length;if(!(c>=f))return b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e),c+4}function A(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+3<a.length,"Trying to write beyond buffer length"),P(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;if(!(c>=f))return S.write(a,b,c,d,23,4),c+4}function B(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+7<a.length,"Trying to write beyond buffer length"),P(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;if(!(c>=f))return S.write(a,b,c,d,52,8),c+8}function C(a){for(a=D(a).replace(U,"");a.length%4!==0;)a+="=";return a}function D(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function E(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function F(a){return E(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function G(a){return 16>a?"0"+a.toString(16):a.toString(16)}function H(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(d);else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function I(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function J(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function K(a){return R.toByteArray(a)}function L(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function M(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function N(a,b){Q("number"==typeof a,"cannot write a non-number as a number"),Q(a>=0,"specified a negative value for writing an unsigned value"),Q(b>=a,"value is larger than maximum value for type"),Q(Math.floor(a)===a,"value has a fractional component")}function O(a,b,c){Q("number"==typeof a,"cannot write a non-number as a number"),Q(b>=a,"value larger than maximum allowed value"),Q(a>=c,"value smaller than minimum allowed value"),Q(Math.floor(a)===a,"value has a fractional component")}function P(a,b,c){Q("number"==typeof a,"cannot write a non-number as a number"),Q(b>=a,"value larger than maximum allowed value"),Q(a>=c,"value smaller than minimum allowed value")}function Q(a,b){if(!a)throw new Error(b||"Failed assertion")}var R=a("base64-js"),S=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192,d._useTypedArrays=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray}catch(c){return!1}}(),d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null==a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a=a.toString(),b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=H(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=K(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(Q(E(a),"Usage: Buffer.concat(list[, length])"),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.compare=function(a,b){Q(d.isBuffer(a)&&d.isBuffer(b),"Arguments must be Buffers");for(var c=a.length,e=b.length,f=0,g=Math.min(c,e);g>f&&a[f]===b[f];f++);return f!==g&&(c=a[f],e=b[f]),e>c?-1:c>e?1:0},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0===c?d.length:Number(c),c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.equals=function(a){return Q(d.isBuffer(a),"Argument must be a Buffer"),0===d.compare(this,a)},d.prototype.compare=function(a){return Q(d.isBuffer(a),"Argument must be a Buffer"),d.compare(this,a)},d.prototype.copy=function(a,b,c,e){var f=this;if(c||(c=0),e||0===e||(e=this.length),b||(b=0),e!==c&&0!==a.length&&0!==f.length){Q(e>=c,"sourceEnd < sourceStart"),Q(b>=0&&b<a.length,"targetStart out of bounds"),Q(c>=0&&c<f.length,"sourceStart out of bounds"),Q(e>=0&&e<=f.length,"sourceEnd out of bounds"),e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c);var g=e-c;if(100>g||!d._useTypedArrays)for(var h=0;g>h;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b)}},d.prototype.slice=function(a,b){var c=this.length;if(a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a),d._useTypedArrays)return d._augment(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(Q(void 0!==a&&null!==a,"missing offset"),Q(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(Q(void 0!==a&&null!==a,"missing offset"),Q(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){return c||(Q(void 0!==a&&null!==a,"missing value"),Q(void 0!==b&&null!==b,"missing offset"),Q(b<this.length,"trying to write beyond buffer length"),N(a,255)),b>=this.length?void 0:(this[b]=a,b+1)},d.prototype.writeUInt16LE=function(a,b,c){return w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){return w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){return x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){return x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){return c||(Q(void 0!==a&&null!==a,"missing value"),Q(void 0!==b&&null!==b,"missing offset"),Q(b<this.length,"Trying to write beyond buffer length"),O(a,127,-128)),b>=this.length?void 0:(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c),b+1)
},d.prototype.writeInt16LE=function(a,b,c){return y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){return y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){return z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){return z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){return A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){return A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){return B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){return B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),Q(c>=b,"end < start"),c!==b&&0!==this.length){Q(b>=0&&b<this.length,"start out of bounds"),Q(c>=0&&c<=this.length,"end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=H(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=G(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(d._useTypedArrays)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var T=d.prototype;d._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=T.get,a.set=T.set,a.write=T.write,a.toString=T.toString,a.toLocaleString=T.toString,a.toJSON=T.toJSON,a.equals=T.equals,a.compare=T.compare,a.copy=T.copy,a.slice=T.slice,a.readUInt8=T.readUInt8,a.readUInt16LE=T.readUInt16LE,a.readUInt16BE=T.readUInt16BE,a.readUInt32LE=T.readUInt32LE,a.readUInt32BE=T.readUInt32BE,a.readInt8=T.readInt8,a.readInt16LE=T.readInt16LE,a.readInt16BE=T.readInt16BE,a.readInt32LE=T.readInt32LE,a.readInt32BE=T.readInt32BE,a.readFloatLE=T.readFloatLE,a.readFloatBE=T.readFloatBE,a.readDoubleLE=T.readDoubleLE,a.readDoubleBE=T.readDoubleBE,a.writeUInt8=T.writeUInt8,a.writeUInt16LE=T.writeUInt16LE,a.writeUInt16BE=T.writeUInt16BE,a.writeUInt32LE=T.writeUInt32LE,a.writeUInt32BE=T.writeUInt32BE,a.writeInt8=T.writeInt8,a.writeInt16LE=T.writeInt16LE,a.writeInt16BE=T.writeInt16BE,a.writeInt32LE=T.writeInt32LE,a.writeInt32BE=T.writeInt32BE,a.writeFloatLE=T.writeFloatLE,a.writeFloatBE=T.writeFloatBE,a.writeDoubleLE=T.writeDoubleLE,a.writeDoubleBE=T.writeDoubleBE,a.fill=T.fill,a.inspect=T.inspect,a.toArrayBuffer=T.toArrayBuffer,a};var U=/[^+\/0-9A-z]/g},{"base64-js":32,ieee754:33}],32:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],33:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],34:[function(a,b){(function(c){function d(a){return function(){var b=[],d={update:function(a,d){return c.isBuffer(a)||(a=new c(a,d)),b.push(a),this},digest:function(d){var e=c.concat(b),f=a(e);return b=null,d?f.toString(d):f}};return d}}var e=a("sha.js"),f=d(a("./md5")),g=d(a("ripemd160"));b.exports=function(a){return"md5"===a?new f:"rmd160"===a?new g:e(a)}}).call(this,a("buffer").Buffer)},{"./md5":38,buffer:31,ripemd160:39,"sha.js":41}],35:[function(a,b){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);this._opad=i,this._alg=a,b=this._key=c.isBuffer(b)?b:new c(b),b.length>f?b=e(a).update(b).digest():b.length<f&&(b=c.concat([b,g],f));for(var h=this._ipad=new c(f),i=this._opad=new c(f),j=0;f>j;j++)h[j]=54^b[j],i[j]=92^b[j];this._hash=e(a).update(h)}var e=a("./create-hash"),f=64,g=new c(f);g.fill(0),b.exports=d,d.prototype.update=function(a,b){return this._hash.update(a,b),this},d.prototype.digest=function(a){var b=this._hash.digest();return e(this._alg).update(this._opad).update(b).digest(a)}}).call(this,a("buffer").Buffer)},{"./create-hash":34,buffer:31}],36:[function(a,b){(function(a){function c(b,c){if(b.length%f!==0){var d=b.length+(f-b.length%f);b=a.concat([b,g],d)}for(var e=[],h=c?b.readInt32BE:b.readInt32LE,i=0;i<b.length;i+=f)e.push(h.call(b,i));return e}function d(b,c,d){for(var e=new a(c),f=d?e.writeInt32BE:e.writeInt32LE,g=0;g<b.length;g++)f.call(e,b[g],4*g,!0);return e}function e(b,e,f,g){a.isBuffer(b)||(b=new a(b));var i=e(c(b,g),b.length*h);return d(i,f,g)}var f=4,g=new a(f);g.fill(0);var h=8;b.exports={hash:e}}).call(this,a("buffer").Buffer)},{buffer:31}],37:[function(a,b,c){(function(b){function d(){var a=[].slice.call(arguments).join(" ");throw new Error([a,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function e(a,b){for(var c in a)b(a[c],c)}var f=a("./rng");c.createHash=a("./create-hash"),c.createHmac=a("./create-hmac"),c.randomBytes=function(a,c){if(!c||!c.call)return new b(f(a));try{c.call(this,void 0,new b(f(a)))}catch(d){c(d)}},c.getHashes=function(){return["sha1","sha256","md5","rmd160"]};var g=a("./pbkdf2")(c.createHmac);c.pbkdf2=g.pbkdf2,c.pbkdf2Sync=g.pbkdf2Sync,e(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(a){c[a]=function(){d("sorry,",a,"is not implemented yet")}})}).call(this,a("buffer").Buffer)},{"./create-hash":34,"./create-hmac":35,"./pbkdf2":45,"./rng":46,buffer:31}],38:[function(a,b){function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=j,p=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,o),k=i(k,p)}return Array(c,d,j,k)}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}var k=a("./helpers");b.exports=function(a){return k.hash(a,c,16)}},{"./helpers":36}],39:[function(a,b){(function(a){function c(a,b,c){return a^b^c}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return(a|~b)^c}function f(a,b,c){return a&c|b&~c}function g(a,b,c){return a^(b|~c)}function h(a,b){return a<<b|a>>>32-b}function i(b){var c=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof b&&(b=new a(b,"utf8"));var d=p(b),e=8*b.length,f=8*b.length;d[e>>>5]|=128<<24-e%32,d[(e+64>>>9<<4)+14]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8);for(var g=0;g<d.length;g+=16)r(c,d,g);for(var g=0;5>g;g++){var h=c[g];c[g]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var i=q(c);return new a(i)}b.exports=i;var j=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],k=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],n=[0,1518500249,1859775393,2400959708,2840853838],o=[1352829926,1548603684,1836072691,2053994217,0],p=function(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b},q=function(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b},r=function(a,b,i){for(var p=0;16>p;p++){var q=i+p,r=b[q];b[q]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s,t,u,v,w,x,y,z,A,B;x=s=a[0],y=t=a[1],z=u=a[2],A=v=a[3],B=w=a[4];for(var C,p=0;80>p;p+=1)C=s+b[i+j[p]]|0,C+=16>p?c(t,u,v)+n[0]:32>p?d(t,u,v)+n[1]:48>p?e(t,u,v)+n[2]:64>p?f(t,u,v)+n[3]:g(t,u,v)+n[4],C=0|C,C=h(C,l[p]),C=C+w|0,s=w,w=v,v=h(u,10),u=t,t=C,C=x+b[i+k[p]]|0,C+=16>p?g(y,z,A)+o[0]:32>p?f(y,z,A)+o[1]:48>p?e(y,z,A)+o[2]:64>p?d(y,z,A)+o[3]:c(y,z,A)+o[4],C=0|C,C=h(C,m[p]),C=C+B|0,x=B,B=A,A=h(z,10),z=y,y=C;C=a[1]+u+A|0,a[1]=a[2]+v+B|0,a[2]=a[3]+w+x|0,a[3]=a[4]+s+y|0,a[4]=a[0]+t+z|0,a[0]=C}}).call(this,a("buffer").Buffer)},{buffer:31}],40:[function(a,b){var c=a("./util"),d=c.write,e=c.zeroFill;b.exports=function(a){function b(b,c){this._block=new a(b),this._finalSize=c,this._blockSize=b,this._len=0,this._s=0}function f(a,b){return null==b?a.byteLength||a.length:"ascii"==b||"binary"==b?a.length:"hex"==b?a.length/2:"base64"==b?a.length/3:void 0}return b.prototype.init=function(){this._s=0,this._len=0},b.prototype.update=function(b,c){var e,g=this._blockSize;c||"string"!=typeof b||(c="utf8"),c?("utf-8"===c&&(c="utf8"),("base64"===c||"utf8"===c)&&(b=new a(b,c),c=null),e=f(b,c)):e=b.byteLength||b.length;for(var h=this._len+=e,i=this._s=this._s||0,j=0,k=this._block;h>i;){var l=Math.min(e,j+g);d(k,b,c,i%g,j,l);var m=l-j;i+=m,j+=m,i%g||this._update(k)}return this._s=i,this},b.prototype.digest=function(a){var b=this._blockSize,d=this._finalSize,f=8*this._len,g=this._block,h=f%(8*b);g[this._len%b]=128,e(this._block,this._len%b+1),h>=8*d&&(this._update(this._block),c.zeroFill(this._block,0)),g.writeInt32BE(f,d+4);var i=this._update(this._block)||this._hash();return null==a?i:i.toString(a)},b.prototype._update=function(){throw new Error("_update must be implemented by subclass")},b}},{"./util":44}],41:[function(a,b,c){var c=b.exports=function(a){var b=c[a];if(!b)throw new Error(a+" is not supported (we accept pull requests)");return new b},d=a("buffer").Buffer,e=a("./hash")(d);c.sha=c.sha1=a("./sha1")(d,e),c.sha256=a("./sha256")(d,e)},{"./hash":40,"./sha1":42,"./sha256":43,buffer:31}],42:[function(a,b){b.exports=function(b,c){function d(){return p.length?p.pop().init():this instanceof d?(this._w=o,c.call(this,64,56),this._h=null,void this.init()):new d}function e(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d}function f(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function g(a,b){return a+b|0}function h(a,b){return a<<b|a>>>32-b}var i=a("util").inherits;i(d,c);var j=0,k=4,l=8,m=12,n=16,o=new Int32Array(80),p=[];d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,c.prototype.init.call(this),this},d.prototype._POOL=p;new b(1)instanceof DataView;return d.prototype._update=function(){{var a,b,c,d,i,j,k,l,m,n,o=this._block;this._h}a=j=this._a,b=k=this._b,c=l=this._c,d=m=this._d,i=n=this._e;for(var p=this._w,q=0;80>q;q++){var r=p[q]=16>q?o.readInt32BE(4*q):h(p[q-3]^p[q-8]^p[q-14]^p[q-16],1),s=g(g(h(a,5),e(q,b,c,d)),g(g(i,r),f(q)));i=d,d=c,c=h(b,30),b=a,a=s}this._a=g(a,j),this._b=g(b,k),this._c=g(c,l),this._d=g(d,m),this._e=g(i,n)},d.prototype._hash=function(){p.length<100&&p.push(this);var a=new b(20);return a.writeInt32BE(0|this._a,j),a.writeInt32BE(0|this._b,k),a.writeInt32BE(0|this._c,l),a.writeInt32BE(0|this._d,m),a.writeInt32BE(0|this._e,n),a},d}},{util:52}],43:[function(a,b){{var c=a("util").inherits;a("./util")}b.exports=function(a,b){function d(){o.length,this.init(),this._w=n,b.call(this,64,56)}function e(a,b){return a>>>b|a<<32-b}function f(a,b){return a>>>b}function g(a,b,c){return a&b^~a&c}function h(a,b,c){return a&b^a&c^b&c}function i(a){return e(a,2)^e(a,13)^e(a,22)}function j(a){return e(a,6)^e(a,11)^e(a,25)}function k(a){return e(a,7)^e(a,18)^f(a,3)}function l(a){return e(a,17)^e(a,19)^f(a,10)}var m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];c(d,b);var n=new Array(64),o=[];d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this};return d.prototype._update=function(){var a,b,c,d,e,f,n,o,p,q,r=this._block,s=this._w;a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,f=0|this._f,n=0|this._g,o=0|this._h;for(var t=0;64>t;t++){var u=s[t]=16>t?r.readInt32BE(4*t):l(s[t-2])+s[t-7]+k(s[t-15])+s[t-16];p=o+j(e)+g(e,f,n)+m[t]+u,q=i(a)+h(a,b,c),o=n,n=f,f=e,e=d+p,d=c,c=b,b=a,a=p+q}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0,this._f=f+this._f|0,this._g=n+this._g|0,this._h=o+this._h|0},d.prototype._hash=function(){o.length<10&&o.push(this);var b=new a(32);return b.writeInt32BE(this._a,0),b.writeInt32BE(this._b,4),b.writeInt32BE(this._c,8),b.writeInt32BE(this._d,12),b.writeInt32BE(this._e,16),b.writeInt32BE(this._f,20),b.writeInt32BE(this._g,24),b.writeInt32BE(this._h,28),b},d}},{"./util":44,util:52}],44:[function(a,b,c){function d(a,b,c,d,e,f){var g=f-e;if("ascii"===c||"binary"===c)for(var h=0;g>h;h++)a[d+h]=b.charCodeAt(h+e);else if(null==c)for(var h=0;g>h;h++)a[d+h]=b[h+e];else{if("hex"!==c)throw new Error("base64"===c?"base64 encoding not yet supported":c+" encoding not yet supported");for(var h=0;g>h;h++){var i=e+h;a[d+h]=parseInt(b[2*i]+b[2*i+1],16)}}}function e(a,b){for(var c=b;c<a.length;c++)a[c]=0}c.write=d,c.zeroFill=e,c.toString=toString},{}],45:[function(a,b){(function(a){var c=64,d=new a(c);d.fill(0),b.exports=function(b,e){return e=e||{},e.pbkdf2=function(a,b,c,d,f){if("function"!=typeof f)throw new Error("No callback provided to pbkdf2");setTimeout(function(){f(null,e.pbkdf2Sync(a,b,c,d))})},e.pbkdf2Sync=function(e,f,g,h){if("number"!=typeof g)throw new TypeError("Iterations not a number");if(0>g)throw new TypeError("Bad iterations");if("number"!=typeof h)throw new TypeError("Key length not a number");if(0>h)throw new TypeError("Bad key length");var e=a.isBuffer(e)?e:new a(e);e.length>c?e=createHash(alg).update(e).digest():e.length<c&&(e=a.concat([e,d],c));var i,j,k,l=0,m=1,n=new a(4),o=new a(h);for(o.fill(0);h;){j=h>20?20:h,n[0]=m>>24&255,n[1]=m>>16&255,n[2]=m>>8&255,n[3]=255&m,i=b("sha1",e),i.update(f),i.update(n),k=i.digest(),k.copy(o,l,0,j);for(var p=1;g>p;p++){i=b("sha1",e),i.update(k),k=i.digest();for(var q=0;j>q;q++)o[q]^=k[q]}h-=j,m++,l+=j}return o},e}}).call(this,a("buffer").Buffer)},{buffer:31}],46:[function(a,b){(function(a){!function(){var c,d,e=this;c=function(b){for(var c,c,d=new a(b),e=0;b>e;e++)0==(3&e)&&(c=4294967296*Math.random()),d[e]=c>>>((3&e)<<3)&255;return d},e.crypto&&crypto.getRandomValues&&(d=function(b){var c=new a(b);return crypto.getRandomValues(c),c}),b.exports=d||c}()}).call(this,a("buffer").Buffer)},{buffer:31}],47:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],48:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],49:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("FWaASH"))},{FWaASH:50}],50:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],51:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],52:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");
var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":51,FWaASH:50,inherits:48}],53:[function(a,b,c){var d=a("net"),e=a("bindings")("hiredis.node");c.Reader=e.Reader,c.createConnection=function(a,b){var c=d.createConnection(a||6379,b),f=new e.Reader,g=c.write;return c.write=function(){var a,b=arguments;for(g.call(c,"*"+b.length+"\r\n"),a=0;a<b.length;a++){var d=b[a];g.call(c,"$"+d.length+"\r\n"+d+"\r\n")}},c.on("data",function(a){var b;f.feed(a);try{for(;void 0!==(b=f.get());)c.emit("reply",b)}catch(d){f=null,c.emit("error",d),c.destroy()}}),c}},{bindings:54,net:30}],54:[function(a,b,c){(function(d,e){function f(b){"string"==typeof b?b={bindings:b}:b||(b={}),b.__proto__=l,b.module_root||(b.module_root=c.getRoot(c.getFileName())),".node"!=h.extname(b.bindings)&&(b.bindings+=".node");for(var d,e,f,g=[],j=0,k=b.try.length;k>j;j++){d=i.apply(null,b.try[j].map(function(a){return b[a]||a})),g.push(d);try{return e=b.path?a.resolve(d):a(d),b.path||(e.path=d),e}catch(m){if(!/not find/i.test(m.message))throw m}}throw f=new Error("Could not locate the bindings file. Tried:\n"+g.map(function(a){return b.arrow+a}).join("\n")),f.tries=g,f}var g=a("fs"),h=a("path"),i=h.join,j=h.dirname,k=g.existsSync||h.existsSync,l={arrow:d.env.NODE_BINDINGS_ARROW||" → ",compiled:d.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:d.platform,arch:d.arch,version:d.versions.node,bindings:"bindings.node","try":[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};b.exports=c=f,c.getFileName=function(a){var b,c=Error.prepareStackTrace,d=Error.stackTraceLimit,f={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(c,d){for(var f=0,g=d.length;g>f;f++)if(b=d[f].getFileName(),b!==e){if(!a)return;if(b!==a)return}},Error.captureStackTrace(f),f.stack,Error.prepareStackTrace=c,Error.stackTraceLimit=d,b},c.getRoot=function(a){for(var b,c=j(a);;){if("."===c&&(c=d.cwd()),k(i(c,"package.json"))||k(i(c,"node_modules")))return c;if(b===c)throw new Error('Could not find module root given file: "'+a+'". Do you have a `package.json` file? ');b=c,c=i(c,"..")}}}).call(this,a("FWaASH"),"/../../node_modules/hiredis/node_modules/bindings/bindings.js")},{FWaASH:50,fs:30,path:49}],55:[function(a,b,c){(function(b,d){function e(){c.debug_mode&&console.log.apply(null,x.call(arguments))}function f(a,b){this.stream=a,this.options=b=b||{},this.connection_id=++u,this.connected=!1,this.ready=!1,this.connections=0,void 0===this.options.socket_nodelay&&(this.options.socket_nodelay=!0),void 0===this.options.socket_keepalive&&(this.options.socket_keepalive=!0),this.should_buffer=!1,this.command_queue_high_water=this.options.command_queue_high_water||1e3,this.command_queue_low_water=this.options.command_queue_low_water||0,this.max_attempts=null,b.max_attempts&&!isNaN(b.max_attempts)&&b.max_attempts>0&&(this.max_attempts=+b.max_attempts),this.command_queue=new p,this.offline_queue=new p,this.commands_sent=0,this.connect_timeout=!1,b.connect_timeout&&!isNaN(b.connect_timeout)&&b.connect_timeout>0&&(this.connect_timeout=+b.connect_timeout),this.enable_offline_queue=!0,"boolean"==typeof this.options.enable_offline_queue&&(this.enable_offline_queue=this.options.enable_offline_queue),this.retry_max_delay=null,void 0!==b.retry_max_delay&&!isNaN(b.retry_max_delay)&&b.retry_max_delay>0&&(this.retry_max_delay=b.retry_max_delay),this.initialize_retry_vars(),this.pub_sub_mode=!1,this.subscription_set={},this.monitoring=!1,this.closing=!1,this.server_info={},this.auth_pass=null,void 0!==b.auth_pass&&(this.auth_pass=b.auth_pass),this.parser_module=null,this.selected_db=null,this.old_state=null,this.install_stream_listeners(),r.EventEmitter.call(this)}function g(a,c){try{a(null,c)}catch(d){if(b.domain){var e=b.domain;e.emit("error",d),b.domain===e&&e.exit()}else b.nextTick(function(){throw d})}}function h(a){var b,c,d,e,f={};if(0===a.length)return null;for(b=0,c=a.length;c>b;b+=2)d=a[b].toString("binary"),e=a[b+1],f[d]=e;return f}function i(a){var b;if(d.isBuffer(a))return a.toString();if(Array.isArray(a)){for(b=0;b<a.length;b++)null!==a[b]&&void 0!==a[b]&&(a[b]=a[b].toString());return a}return a}function j(a,b,c,d,e){this.command=a,this.args=b,this.sub_command=c,this.buffer_args=d,this.callback=e}function k(a,b){this._client=a,this.queue=[["MULTI"]],Array.isArray(b)&&(this.queue=this.queue.concat(b))}function l(a,b){var c={};return a.forEach(function(a){c[a]=!0}),b.forEach(function(a){c[a]=!0}),Object.keys(c)}var m,n=a("net"),o=a("./lib/util"),p=a("./lib/queue"),q=a("./lib/to_array"),r=a("events"),s=a("crypto"),t=[],u=0,v=6379,w="127.0.0.1";c.debug_mode=!1;var x=Array.prototype.slice;try{a("./lib/parser/hiredis"),t.push(a("./lib/parser/hiredis"))}catch(y){c.debug_mode&&console.warn("hiredis parser not installed.")}t.push(a("./lib/parser/javascript")),o.inherits(f,r.EventEmitter),c.RedisClient=f,f.prototype.install_stream_listeners=function(){var a=this;this.stream.on("connect",function(){a.on_connect()}),this.stream.on("data",function(b){a.on_data(b)}),this.stream.on("error",function(b){a.on_error(b.message)}),this.stream.on("close",function(){a.connection_gone("close")}),this.stream.on("end",function(){a.connection_gone("end")}),this.stream.on("drain",function(){a.should_buffer=!1,a.emit("drain")})},f.prototype.initialize_retry_vars=function(){this.retry_timer=null,this.retry_totaltime=0,this.retry_delay=150,this.retry_backoff=1.7,this.attempts=1},f.prototype.unref=function(){e("User requesting to unref the connection"),this.connected?(e("unref'ing the socket connection"),this.stream.unref()):(e("Not connected yet, will unref later"),this.once("connect",function(){this.unref()}))},f.prototype.flush_and_error=function(a){var c,d;for(d=new Error(a);this.offline_queue.length>0;)if(c=this.offline_queue.shift(),"function"==typeof c.callback)try{c.callback(d)}catch(e){b.nextTick(function(){throw e})}for(this.offline_queue=new p;this.command_queue.length>0;)if(c=this.command_queue.shift(),"function"==typeof c.callback)try{c.callback(d)}catch(e){b.nextTick(function(){throw e})}this.command_queue=new p},f.prototype.on_error=function(a){var b="Redis connection to "+this.host+":"+this.port+" failed - "+a;this.closing||(c.debug_mode&&console.warn(b),this.flush_and_error(b),this.connected=!1,this.ready=!1,this.emit("error",new Error(b)),this.connection_gone("error"))},f.prototype.do_auth=function(){var a=this;c.debug_mode&&console.log("Sending auth to "+a.host+":"+a.port+" id "+a.connection_id),a.send_anyway=!0,a.send_command("auth",[this.auth_pass],function(b,d){if(b){if(b.toString().match("LOADING"))return console.log("Redis still loading, trying to authenticate later"),void setTimeout(function(){a.do_auth()},2e3);if(!b.toString().match("no password is set"))return a.emit("error",new Error("Auth error: "+b.message));console.log("Warning: Redis server does not require a password, but a password was supplied."),b=null,d="OK"}return"OK"!==d.toString()?a.emit("error",new Error("Auth failed: "+d.toString())):(c.debug_mode&&console.log("Auth succeeded "+a.host+":"+a.port+" id "+a.connection_id),a.auth_callback&&(a.auth_callback(b,d),a.auth_callback=null),a.emit("connect"),a.initialize_retry_vars(),void(a.options.no_ready_check?a.on_ready():a.ready_check()))}),a.send_anyway=!1},f.prototype.on_connect=function(){c.debug_mode&&console.log("Stream connected "+this.host+":"+this.port+" id "+this.connection_id),this.connected=!0,this.ready=!1,this.connections+=1,this.command_queue=new p,this.emitted_end=!1,this.options.socket_nodelay&&this.stream.setNoDelay(),this.stream.setKeepAlive(this.options.socket_keepalive),this.stream.setTimeout(0),this.init_parser(),this.auth_pass?this.do_auth():(this.emit("connect"),this.initialize_retry_vars(),this.options.no_ready_check?this.on_ready():this.ready_check())},f.prototype.init_parser=function(){var a=this;if(this.options.parser){if(!t.some(function(b){return b.name===a.options.parser?(a.parser_module=b,c.debug_mode&&console.log("Using parser module: "+a.parser_module.name),!0):void 0}))throw new Error("Couldn't find named parser "+a.options.parser+" on this system")}else c.debug_mode&&console.log("Using default parser module: "+t[0].name),this.parser_module=t[0];this.parser_module.debug_mode=c.debug_mode,this.reply_parser=new this.parser_module.Parser({return_buffers:a.options.return_buffers||a.options.detect_buffers||!1}),this.reply_parser.on("reply error",function(b){a.return_error(b instanceof Error?b:new Error(b))}),this.reply_parser.on("reply",function(b){a.return_reply(b)}),this.reply_parser.on("error",function(b){a.emit("error",new Error("Redis reply parser error: "+b.stack))})},f.prototype.on_ready=function(){var a=this;if(this.ready=!0,null!==this.old_state&&(this.monitoring=this.old_state.monitoring,this.pub_sub_mode=this.old_state.pub_sub_mode,this.selected_db=this.old_state.selected_db,this.old_state=null),null!==this.selected_db){var b=this.pub_sub_mode;this.pub_sub_mode=!1,this.send_command("select",[this.selected_db]),this.pub_sub_mode=b}if(this.pub_sub_mode===!0){var d=0,e=function(){d--,0===d&&a.emit("ready")};return void Object.keys(this.subscription_set).forEach(function(b){var f=b.split(" ");c.debug_mode&&console.warn("sending pub/sub on_ready "+f[0]+", "+f[1]),d++,a.send_command(f[0]+"scribe",[f[1]],e)})}this.monitoring?this.send_command("monitor"):this.send_offline_queue(),this.emit("ready")},f.prototype.on_info_cmd=function(a,b){var d,e,f=this,g={};return a?f.emit("error",new Error("Ready check failed: "+a.message)):(d=b.toString().split("\r\n"),d.forEach(function(a){var b=a.split(":");b[1]&&(g[b[0]]=b[1])}),g.versions=[],g.redis_version&&g.redis_version.split(".").forEach(function(a){g.versions.push(+a)}),this.server_info=g,void(!g.loading||g.loading&&"0"===g.loading?(c.debug_mode&&console.log("Redis server ready."),this.on_ready()):(e=1e3*g.loading_eta_seconds,e>1e3&&(e=1e3),c.debug_mode&&console.log("Redis server still loading, trying again in "+e),setTimeout(function(){f.ready_check()},e))))},f.prototype.ready_check=function(){var a=this;c.debug_mode&&console.log("checking server ready state..."),this.send_anyway=!0,this.info(function(b,c){a.on_info_cmd(b,c)}),this.send_anyway=!1},f.prototype.send_offline_queue=function(){for(var a,b=0;this.offline_queue.length>0;)a=this.offline_queue.shift(),c.debug_mode&&console.log("Sending offline command: "+a.command),b+=!this.send_command(a.command,a.args,a.callback);this.offline_queue=new p,b||(this.should_buffer=!1,this.emit("drain"))},f.prototype.connection_gone=function(a){var b=this;if(!this.retry_timer){if(c.debug_mode&&console.warn("Redis connection is gone from "+a+" event."),this.connected=!1,this.ready=!1,null===this.old_state){var d={monitoring:this.monitoring,pub_sub_mode:this.pub_sub_mode,selected_db:this.selected_db};this.old_state=d,this.monitoring=!1,this.pub_sub_mode=!1,this.selected_db=null}if(this.emitted_end||(this.emit("end"),this.emitted_end=!0),this.flush_and_error("Redis connection gone from "+a+" event."),this.closing)return this.retry_timer=null,void(c.debug_mode&&console.warn("connection ended from quit command, not retrying."));var e=Math.floor(this.retry_delay*this.retry_backoff);if(this.retry_delay=null!==this.retry_max_delay&&e>this.retry_max_delay?this.retry_max_delay:e,c.debug_mode&&console.log("Retry connection in "+this.retry_delay+" ms"),this.max_attempts&&this.attempts>=this.max_attempts)return this.retry_timer=null,void console.error("node_redis: Couldn't get Redis connection after "+this.max_attempts+" attempts.");this.attempts+=1,this.emit("reconnecting",{delay:b.retry_delay,attempt:b.attempts}),this.retry_timer=setTimeout(function(){return c.debug_mode&&console.log("Retrying connection..."),b.retry_totaltime+=b.retry_delay,b.connect_timeout&&b.retry_totaltime>=b.connect_timeout?(b.retry_timer=null,void console.error("node_redis: Couldn't get Redis connection after "+b.retry_totaltime+"ms.")):(b.stream=n.createConnection(b.port,b.host),b.install_stream_listeners(),void(b.retry_timer=null))},this.retry_delay)}},f.prototype.on_data=function(a){c.debug_mode&&console.log("net read "+this.host+":"+this.port+" id "+this.connection_id+": "+a.toString());try{this.reply_parser.execute(a)}catch(b){this.emit("error",b)}},f.prototype.return_error=function(a){var c=this.command_queue.shift(),d=this.command_queue.getLength();if(this.pub_sub_mode===!1&&0===d&&(this.command_queue=new p,this.emit("idle")),this.should_buffer&&d<=this.command_queue_low_water&&(this.emit("drain"),this.should_buffer=!1),c&&"function"==typeof c.callback)try{c.callback(a)}catch(e){b.nextTick(function(){throw e})}else console.log("node_redis: no callback to send error: "+a.message),b.nextTick(function(){throw a})},f.prototype.return_reply=function(a){var b,d,f,j,k,l,m;if(Array.isArray(a)&&a.length>0&&a[0]&&(f=a[0].toString()),!this.pub_sub_mode||"message"!=f&&"pmessage"!=f?b=this.command_queue.shift():e("received pubsub message"),m=this.command_queue.getLength(),this.pub_sub_mode===!1&&0===m&&(this.command_queue=new p,this.emit("idle")),this.should_buffer&&m<=this.command_queue_low_water&&(this.emit("drain"),this.should_buffer=!1),b&&!b.sub_command)"function"==typeof b.callback?(this.options.detect_buffers&&b.buffer_args===!1&&(a=i(a)),a&&"hgetall"===b.command.toLowerCase()&&(a=h(a)),g(b.callback,a)):c.debug_mode&&console.log("no callback for reply: "+(a&&a.toString&&a.toString()));else if(this.pub_sub_mode||b&&b.sub_command){if(Array.isArray(a))if(f=a[0].toString(),"message"===f)this.emit("message",a[1].toString(),a[2]);else if("pmessage"===f)this.emit("pmessage",a[1].toString(),a[2].toString(),a[3]);else{if("subscribe"!==f&&"unsubscribe"!==f&&"psubscribe"!==f&&"punsubscribe"!==f)throw new Error("subscriptions are active but got unknown reply type "+f);0===a[2]?(this.pub_sub_mode=!1,this.debug_mode&&console.log("All subscriptions removed, exiting pub/sub mode")):this.pub_sub_mode=!0;var n=null===a[1]?null:a[1].toString();b&&"function"==typeof b.callback&&g(b.callback,n),this.emit(f,n,a[2])}else if(!this.closing)throw new Error("subscriptions are active but got an invalid reply: "+a)}else{if(!this.monitoring)throw new Error("node_redis command queue state error. If you can reproduce this, please report it.");d=a.indexOf(" "),j=a.slice(0,d),k=a.indexOf('"'),l=a.slice(k+1,-1).split('" "').map(function(a){return a.replace(/\\"/g,'"')}),this.emit("monitor",j,l)}},f.prototype.send_command=function(a,e,f){var g,h,i,k,l,m,n,o,p=this.stream,q="",r=0;if("string"!=typeof a)throw new Error("First argument to send_command must be the command name string, not "+typeof a);if(!Array.isArray(e))throw new Error("send_command: second argument must be an array");if("function"==typeof f);else{if(f)throw new Error("send_command: last argument must be a callback or undefined");n=typeof e[e.length-1],("function"===n||"undefined"===n)&&(f=e.pop())}if(f&&b.domain&&(f=b.domain.bind(f)),o=a.toLowerCase(),("sadd"===o||"srem"===o)&&e.length>0&&Array.isArray(e[e.length-1])&&(e=e.slice(0,-1).concat(e[e.length-1])),!("set"!==a&&"setex"!==a||void 0!==e[e.length-1]&&null!==e[e.length-1])){var s=new Error("send_command: "+a+" value must not be undefined or null");return f&&f(s)}for(m=!1,i=0,k=e.length,g;k>i;i+=1)d.isBuffer(e[i])&&(m=!0);if(h=new j(a,e,!1,m,f),!this.ready&&!this.send_anyway||!p.writable){if(c.debug_mode&&(p.writable||console.log("send command: stream is not writeable.")),this.enable_offline_queue)c.debug_mode&&console.log("Queueing "+a+" for next server connection."),this.offline_queue.push(h),this.should_buffer=!0;else{var t=new Error("send_command: stream not writeable. enable_offline_queue is false");if(!h.callback)throw t;h.callback(t)}return!1}if("subscribe"===a||"psubscribe"===a||"unsubscribe"===a||"punsubscribe"===a)this.pub_sub_command(h);else if("monitor"===a)this.monitoring=!0;else if("quit"===a)this.closing=!0;else if(this.pub_sub_mode===!0)throw new Error("Connection in subscriber mode, only subscriber commands may be used");if(this.command_queue.push(h),this.commands_sent+=1,l=e.length+1,q="*"+l+"\r\n$"+a.length+"\r\n"+a+"\r\n",m)for(c.debug_mode&&console.log("send command ("+q+") has Buffer arguments"),r+=!p.write(q),i=0,k=e.length,g;k>i;i+=1)g=e[i],d.isBuffer(g)||g instanceof String||(g=String(g)),d.isBuffer(g)?0===g.length?(c.debug_mode&&console.log("send_command: using empty string for 0 length buffer"),r+=!p.write("$0\r\n\r\n")):(r+=!p.write("$"+g.length+"\r\n"),r+=!p.write(g),r+=!p.write("\r\n"),c.debug_mode&&console.log("send_command: buffer send "+g.length+" bytes")):(c.debug_mode&&console.log("send_command: string send "+d.byteLength(g)+" bytes: "+g),r+=!p.write("$"+d.byteLength(g)+"\r\n"+g+"\r\n"));else{for(i=0,k=e.length,g;k>i;i+=1)g=e[i],"string"!=typeof g&&(g=String(g)),q+="$"+d.byteLength(g)+"\r\n"+g+"\r\n";c.debug_mode&&console.log("send "+this.host+":"+this.port+" id "+this.connection_id+": "+q),r+=!p.write(q)}return c.debug_mode&&console.log("send_command buffered_writes: "+r," should_buffer: "+this.should_buffer),(r||this.command_queue.getLength()>=this.command_queue_high_water)&&(this.should_buffer=!0),!this.should_buffer},f.prototype.pub_sub_command=function(a){var b,d,e,f;if(this.pub_sub_mode===!1&&c.debug_mode&&console.log("Entering pub/sub mode from "+a.command),this.pub_sub_mode=!0,a.sub_command=!0,e=a.command,f=a.args,"subscribe"===e||"psubscribe"===e)for(d="subscribe"===e?"sub":"psub",b=0;b<f.length;b++)this.subscription_set[d+" "+f[b]]=!0;else for(d="unsubscribe"===e?"sub":"psub",b=0;b<f.length;b++)delete this.subscription_set[d+" "+f[b]]},f.prototype.end=function(){return this.stream._events={},this.retry_timer&&(clearTimeout(this.retry_timer),this.retry_timer=null),this.stream.on("error",function(){}),this.connected=!1,this.ready=!1,this.closing=!0,this.stream.destroySoon()},c.Multi=k,m=l(["get","set","setnx","setex","append","strlen","del","exists","setbit","getbit","setrange","getrange","substr","incr","decr","mget","rpush","lpush","rpushx","lpushx","linsert","rpop","lpop","brpop","brpoplpush","blpop","llen","lindex","lset","lrange","ltrim","lrem","rpoplpush","sadd","srem","smove","sismember","scard","spop","srandmember","sinter","sinterstore","sunion","sunionstore","sdiff","sdiffstore","smembers","zadd","zincrby","zrem","zremrangebyscore","zremrangebyrank","zunionstore","zinterstore","zrange","zrangebyscore","zrevrangebyscore","zcount","zrevrange","zcard","zscore","zrank","zrevrank","hset","hsetnx","hget","hmset","hmget","hincrby","hdel","hlen","hkeys","hvals","hgetall","hexists","incrby","decrby","getset","mset","msetnx","randomkey","select","move","rename","renamenx","expire","expireat","keys","dbsize","auth","ping","echo","save","bgsave","bgrewriteaof","shutdown","lastsave","type","multi","exec","discard","sync","flushdb","flushall","sort","info","monitor","ttl","persist","slaveof","debug","config","subscribe","unsubscribe","psubscribe","punsubscribe","publish","watch","unwatch","cluster","restore","migrate","dump","object","client","eval","evalsha"],a("./lib/commands")),m.forEach(function(a){var b=a.split(" ")[0];f.prototype[b]=function(a,c){return Array.isArray(a)&&"function"==typeof c?this.send_command(b,a,c):this.send_command(b,q(arguments))},f.prototype[b.toUpperCase()]=f.prototype[b],k.prototype[b]=function(){return this.queue.push([b].concat(q(arguments))),this},k.prototype[b.toUpperCase()]=k.prototype[b]}),f.prototype.select=function(a,b){var c=this;this.send_command("select",[a],function(d,e){null===d&&(c.selected_db=a),"function"==typeof b?b(d,e):d&&c.emit("error",d)})},f.prototype.SELECT=f.prototype.select,f.prototype.auth=function(){var a=q(arguments);this.auth_pass=a[0],this.auth_callback=a[1],c.debug_mode&&console.log("Saving auth as "+this.auth_pass),this.connected&&this.send_command("auth",a)},f.prototype.AUTH=f.prototype.auth,f.prototype.hmget=function(a,b,c){return Array.isArray(b)&&"function"==typeof c?this.send_command("hmget",[a].concat(b),c):Array.isArray(a)&&"function"==typeof b?this.send_command("hmget",a,b):this.send_command("hmget",q(arguments))},f.prototype.HMGET=f.prototype.hmget,f.prototype.hmset=function(a,b){var c,d,e,f,g;if(Array.isArray(a)&&"function"==typeof b)return this.send_command("hmset",a,b);if(a=q(arguments),"function"==typeof a[a.length-1]?(b=a[a.length-1],a.length-=1):b=null,2===a.length&&("string"==typeof a[0]||"number"==typeof a[0])&&"object"==typeof a[1]){for("number"==typeof a[0]&&(a[0]=a[0].toString()),c=[a[0]],d=Object.keys(a[1]),e=0,f=d.length;f>e;e++)g=d[e],c.push(g),c.push(a[1][g]);a=c}return this.send_command("hmset",a,b)},f.prototype.HMSET=f.prototype.hmset,k.prototype.hmset=function(){var a,b=q(arguments);return b.length>=2&&"string"==typeof b[0]&&"object"==typeof b[1]?(a=["hmset",b[0]],Object.keys(b[1]).map(function(c){a.push(c),a.push(b[1][c])}),b[2]&&a.push(b[2]),b=a):b.unshift("hmset"),this.queue.push(b),this},k.prototype.HMSET=k.prototype.hmset,k.prototype.exec=function(a){var b=this,c=[];return this.queue.forEach(function(a,d){var e,f=a[0];a="function"==typeof a[a.length-1]?a.slice(1,-1):a.slice(1),1===a.length&&Array.isArray(a[0])&&(a=a[0]),"hmset"===f.toLowerCase()&&"object"==typeof a[1]&&(e=a.pop(),Object.keys(e).forEach(function(b){a.push(b),a.push(e[b])})),this._client.send_command(f,a,function(a){if(a){var e=b.queue[d];"function"==typeof e[e.length-1]?e[e.length-1](a):c.push(new Error(a))}})},this),this._client.send_command("EXEC",[],function(d,e){if(d){if(a)return c.push(new Error(d)),void a(c);throw new Error(d)}var f,g,i,j;if(e)for(f=1,g=b.queue.length;g>f;f+=1)i=e[f-1],j=b.queue[f],i&&"hgetall"===j[0].toLowerCase()&&(e[f-1]=i=h(i)),"function"==typeof j[j.length-1]&&j[j.length-1](null,i);a&&a(null,e)})},k.prototype.EXEC=k.prototype.exec,f.prototype.multi=function(a){return new k(this,a)},f.prototype.MULTI=function(a){return new k(this,a)};var z=f.prototype.eval;f.prototype.eval=f.prototype.EVAL=function(){var a,b=this,c=q(arguments);"function"==typeof c[c.length-1]&&(a=c.pop()),Array.isArray(c[0])&&(c=c[0]);var d=c[0];c[0]=s.createHash("sha1").update(d).digest("hex"),b.evalsha(c,function(e,f){e&&/NOSCRIPT/.test(e.message)?(c[0]=d,z.call(b,c,a)):a&&a(e,f)})},c.createClient=function(a,b,c){var d;c&&c.family&&(d="IPv6"==c.family?6:4);var e,g,h={port:a||v,host:b||w,family:d||"4"};return g=n.createConnection(h),e=new f(g,c),e.port=h.port,e.host=h.host,e},c.print=function(a,b){console.log(a?"Error: "+a:"Reply: "+b)}}).call(this,a("FWaASH"),a("buffer").Buffer)},{"./lib/commands":56,"./lib/parser/hiredis":57,"./lib/parser/javascript":58,"./lib/queue":59,"./lib/to_array":60,"./lib/util":61,FWaASH:50,buffer:31,crypto:37,events:47,net:30}],56:[function(a,b){b.exports=["append","auth","bgrewriteaof","bgsave","bitcount","bitop","bitpos","blpop","brpop","brpoplpush","client kill","client list","client getname","client pause","client setname","config get","config rewrite","config set","config resetstat","dbsize","debug object","debug segfault","decr","decrby","del","discard","dump","echo","eval","evalsha","exec","exists","expire","expireat","flushall","flushdb","get","getbit","getrange","getset","hdel","hexists","hget","hgetall","hincrby","hincrbyfloat","hkeys","hlen","hmget","hmset","hset","hsetnx","hvals","incr","incrby","incrbyfloat","info","keys","lastsave","lindex","linsert","llen","lpop","lpush","lpushx","lrange","lrem","lset","ltrim","mget","migrate","monitor","move","mset","msetnx","multi","object","persist","pexpire","pexpireat","pfadd","pfcount","pfmerge","ping","psetex","psubscribe","pubsub","pttl","publish","punsubscribe","quit","randomkey","rename","renamenx","restore","rpop","rpoplpush","rpush","rpushx","sadd","save","scard","script exists","script flush","script kill","script load","sdiff","sdiffstore","select","set","setbit","setex","setnx","setrange","shutdown","sinter","sinterstore","sismember","slaveof","slowlog","smembers","smove","sort","spop","srandmember","srem","strlen","subscribe","sunion","sunionstore","sync","time","ttl","type","unsubscribe","unwatch","watch","zadd","zcard","zcount","zincrby","zinterstore","zlexcount","zrange","zrangebylex","zrangebyscore","zrank","zrem","zremrangebylex","zremrangebyrank","zremrangebyscore","zrevrange","zrevrangebyscore","zrevrank","zscore","zunionstore","scan","sscan","hscan","zscan"]},{}],57:[function(a,b,c){function d(a){this.name=c.name,this.options=a||{},this.reset(),e.EventEmitter.call(this)}var e=a("events"),f=a("../util"),g=a("hiredis");c.debug_mode=!1,c.name="hiredis",f.inherits(d,e.EventEmitter),c.Parser=d,d.prototype.reset=function(){this.reader=new g.Reader({return_buffers:this.options.return_buffers||!1})},d.prototype.execute=function(a){var b;for(this.reader.feed(a);;){try{b=this.reader.get()}catch(c){this.emit("error",c);break}if(void 0===b)break;b&&b.constructor===Error?this.emit("reply error",b):this.emit("reply",b)}}},{"../util":61,events:47,hiredis:53}],58:[function(a,b,c){(function(b){function d(a,b){this.type=a,this.size=+b}function e(a){this.name=c.name,this.options=a||{},this._buffer=null,this._offset=0,this._encoding="utf-8",this._debug_mode=a.debug_mode,this._reply_type=null}function f(a){this.name="IncompleteReadBuffer",this.message=a}function g(a,b,c){var d,e="";for(d=b;c>d;d++)e+=String.fromCharCode(a[d]);return e}var h=a("events"),i=a("../util");c.name="javascript",c.debug_mode=!1,i.inherits(e,h.EventEmitter),c.Parser=e,i.inherits(f,Error),e.prototype._parseResult=function(a){var b,c,e,h;if(43===a||45===a){if(c=this._packetEndOffset()-1,b=this._offset,this._offset=c+2,c>this._buffer.length)throw this._offset=b,new f("Wait for more data.");return this.options.return_buffers?this._buffer.slice(b,c):65536>c-b?g(this._buffer,b,c):this._buffer.toString(this._encoding,b,c)}if(58===a){if(c=this._packetEndOffset()-1,b=this._offset,this._offset=c+2,c>this._buffer.length)throw this._offset=b,new f("Wait for more data.");return this.options.return_buffers?this._buffer.slice(b,c):+g(this._buffer,b,c)}if(36===a){if(e=this._offset-1,h=new d(a,this.parseHeader()),-1===h.size)return void 0;if(c=this._offset+h.size,b=this._offset,this._offset=c+2,c>this._buffer.length)throw this._offset=e,new f("Wait for more data.");return this.options.return_buffers?this._buffer.slice(b,c):this._buffer.toString(this._encoding,b,c)}if(42===a){if(e=this._offset,h=new d(a,this.parseHeader()),h.size<0)return null;if(h.size>this._bytesRemaining())throw this._offset=e-1,new f("Wait for more data.");var i,j,k,l=[];for(e=this._offset-1,j=0;j<h.size;j++){if(i=this._buffer[this._offset++],this._offset>this._buffer.length)throw new f("Wait for more data.");k=this._parseResult(i),void 0===k&&(k=null),l.push(k)}return l}},e.prototype.execute=function(a){this.append(a);for(var b,c,d;;){d=this._offset;try{if(this._bytesRemaining()<4)break;if(b=this._buffer[this._offset++],43===b){if(c=this._parseResult(b),null===c)break;this.send_reply(c)}else if(45===b){if(c=this._parseResult(b),null===c)break;this.send_error(c)}else if(58===b){if(c=this._parseResult(b),null===c)break;this.send_reply(c)}else if(36===b){if(c=this._parseResult(b),null===c)break;void 0===c&&(c=null),this.send_reply(c)}else 42===b&&(d=this._offset-1,c=this._parseResult(b),this.send_reply(c))}catch(e){if(!(e instanceof f))throw e;this._offset=d;break}}},e.prototype.append=function(a){if(a){if(null===this._buffer)return void(this._buffer=a);if(this._offset>=this._buffer.length)return this._buffer=a,void(this._offset=0);if(void 0!==b.concat)this._buffer=b.concat([this._buffer.slice(this._offset),a]);else{var c=this._bytesRemaining(),d=c+a.length,e=new b(d);this._buffer.copy(e,0,this._offset),a.copy(e,c,0),this._buffer=e}this._offset=0}},e.prototype.parseHeader=function(){var a=this._packetEndOffset(),b=g(this._buffer,this._offset,a-1);return this._offset=a+1,b},e.prototype._packetEndOffset=function(){for(var a=this._offset;13!==this._buffer[a]&&10!==this._buffer[a+1];)if(a++,a>=this._buffer.length)throw new f("didn't see LF after NL reading multi bulk count ("+a+" => "+this._buffer.length+", "+this._offset+")");return a++,a},e.prototype._bytesRemaining=function(){return this._buffer.length-this._offset<0?0:this._buffer.length-this._offset},e.prototype.parser_error=function(a){this.emit("error",a)},e.prototype.send_error=function(a){this.emit("reply error",a)},e.prototype.send_reply=function(a){this.emit("reply",a)}}).call(this,a("buffer").Buffer)},{"../util":61,buffer:31,events:47}],59:[function(a,b){function c(){this.tail=[],this.head=[],this.offset=0}c.prototype.shift=function(){if(this.offset===this.head.length){var a=this.head;if(a.length=0,this.head=this.tail,this.tail=a,this.offset=0,0===this.head.length)return}return this.head[this.offset++]},c.prototype.push=function(a){return this.tail.push(a)},c.prototype.forEach=function(a,b){var c,d,e=this.head.slice(this.offset);if(e.push.apply(e,this.tail),b)for(c=0,d=e.length;d>c;c+=1)a.call(b,e[c],c,e);else for(c=0,d=e.length;d>c;c+=1)a(e[c],c,e);return e},c.prototype.getLength=function(){return this.head.length-this.offset+this.tail.length},Object.defineProperty(c.prototype,"length",{get:function(){return this.getLength()}}),"undefined"!=typeof b&&b.exports&&(b.exports=c)},{}],60:[function(a,b){function c(a){var b,c=a.length,d=new Array(c);for(b=0;c>b;b+=1)d[b]=a[b];return d}b.exports=c},{}],61:[function(a,b){var c;try{c=a("util")}catch(d){c=a("sys")}b.exports=c},{sys:52,util:52}]},{},[10]);